<!DOCTYPE html>
<html>
  <head>
    <title>Decompilation Status</title>
    <style>
      body {
        background: #202020;
        color: #f0f0f0;
        font-family: sans-serif;
      }

      h1 {
        text-align: center;
      }

      .main {
        width: 800px;
        max-width: 100%;
        margin: auto;
      }

      search-bar > input {
        width: 100%;
        box-sizing: border-box;
        background: #303030;
        color: #f0f0f0;
        border: 1px #f0f0f0 solid;
        padding: 0.5em;
        border-radius: 0.5em;
      }

      search-bar > input::placeholder {
        color: #b0b0b0;
      }

      #listing {
        width: 100%;
        border-collapse: collapse;
        font-family: monospace;
      }

      tr[data-address]:hover {
        background: #404040 !important;
      }

      tr[data-address]:nth-child(odd of :not([hidden])), #listing > thead th {
        background: #282828;
      }

      tr[data-address]:nth-child(even of :not([hidden])) {
        background: #383838;
      }

      table#listing {
        border: 1px #f0f0f0 solid;
        table-layout: fixed;
      }

      #listing > thead th {
        padding: 0.5em;
        user-select: none;
        text-align: left;
      }

      #listing > thead th[data-col="address"],
      #listing > thead th[data-col="recomp"] {
        /* enough for "0x" and 8 digit address */
        width: 10ch;
      }

      #listing > thead th[data-col="diffs"],
      #listing > thead th[data-col="matching"] {
        width: 8ch;
      }

      #listing > thead th > div {
        display: flex;
        column-gap: 0.5em;
      }

      #listing > thead th > div > span {
        cursor: pointer;
      }

      #listing > thead th > div > span:hover {
        text-decoration: underline;
        text-decoration-style: dotted;
      }

      #listing > thead th:last-child > div {
        /* Draw the sort triangle to the left of the last column. */
        flex-direction: row-reverse;
        justify-content: right;
      }

      .diffneg {
        color: #FF8080;
      }

      .diffpos {
        color: #80FF80;
      }

      .diffslug {
        color: #8080FF;
      }

      .identical {
        font-style: italic;
        text-align: center;
      }

      .filters {
        align-items: top;
        display: flex;
        font-size: 10pt;
        justify-content: space-between;
        margin: 0.5em 0 1em 0;
      }

      label, button, input[type=checkbox], input[type=radio] {
        cursor: pointer;
        user-select: none;
      }

      /* Spread out inputs horizontally. */
      fieldset, search-options {
        align-items: center;
        display: flex;
      }

      search-options {
        gap: 10px;
      }

      fieldset:not(#pageDisplay) {
        gap: 10px;
        padding-right: 20px;
      }

      table.diffTable {
        border-collapse: collapse;
      }

      table.diffTable:not(:last-child) {
        /* visual gap *between* diff context groups */
        margin-bottom: 40px;
      }

      table.diffTable td, table.diffTable th {
        border: 0 none;
        padding: 0 10px 0 0;
      }

      table.diffTable th {
        /* don't break address if asm line is long */
        word-break: keep-all;
      }

      diff-display[data-option="0"] th:nth-child(1) {
        display: none;
      }

      diff-display[data-option="0"] th:nth-child(2),
      diff-display[data-option="1"] th:nth-child(2) {
        display: none;
      }

      label {
        align-items: center;
        display: flex;
        user-select: none;
      }

      prev-page-button > button, next-page-button > button {
        padding: 0.25em 0.5em;
      }

      page-select > select {
        cursor: pointer;
        padding: 0.25em;
        margin: 0 0.5em;
      }

      p.rowcount {
        align-self: flex-end;
        font-size: 1.2em;
        margin-bottom: 0;
      }

      tr[data-diff]:not([hidden]) {
        contain: paint;
      }

      tr[data-diff] > td {
        border: 1px #f0f0f0 solid;
        border-bottom: 0px none;
        display: table-cell;
        padding: 0.5em;
        word-break: break-all !important;
      }

      tr[data-diff] > td > div.no-diff {
        font-style: italic;
        text-align: center;
      }

      tr[data-address] > td[data-col="name"]:hover {
        cursor: pointer;
        text-decoration: underline;
        text-decoration-style: dotted;
      }

      tr[data-address] > td:not(data-col="name"]) {
        white-space: nowrap;
      }

      tr[data-address] > td {
        border-top: 1px #f0f0f0 solid;
        display: table-cell;
        padding: 0.5em;
        vertical-align: top;
        white-space: nowrap;
      }

      tr[data-address] > td[data-col="name"] {
        white-space: wrap;
        word-break: break-all !important;
      }

      tr[data-address] > td:last-child {
        text-align: right;
      }

      click-to-copy {
        position: relative;
        cursor: pointer;
      }
      click-to-copy::after {
        background-color: #fff;
        color: #222;
        display: none;
        font-size: 12px;
        padding: 1px 2px;
        width: fit-content;
        border-radius: 1px;
        text-align: center;
        bottom: 120%;
        left: 0;
        box-shadow: 0 4px 14px 0 rgba(0,0,0,.2), 0 0 0 1px rgba(0,0,0,.05);
        position: absolute;
        white-space: nowrap;
        transition: .1s;
        content: 'Copy to clipboard';
      }
      click-to-copy:hover {
        text-decoration: underline;
        text-decoration-style: dotted;
      }
      click-to-copy:hover::after {
        display: block;
      }
      click-to-copy[copied]:hover::after {
        content: 'Copied!';
      }
    </style>
    <script>
      window.global_reccmp_report = {"file":"cmr2.exe","format":1,"timestamp":1766954737.0,"data":[{"address":"0x405626","name":"_WinMainCRTStartup","matching":0.8157894736842105,"recomp":"0x402702","diff":[["@@ -0x405626,64 +0x402702,64 @@",[{"both":[["0x405626","push ebp","0x402702"],["0x405627","mov ebp, esp","0x402703"],["0x405629","push -1","0x402705"]]},{"orig":[["0x40562b","push 0x5112d0"],["0x405630","push 0x4057b0"]],"recomp":[["0x402707","push <OFFSET1>"],["0x40270c","push MSVCRT.dll::_except_handler3 (IMPORT_THUNK)"]]},{"both":[["0x405635","mov eax, dword ptr fs:[0]","0x402711"],["0x40563b","push eax","0x402717"],["0x40563c","mov dword ptr fs:[0], esp","0x402718"],["0x405643","sub esp, 0x68","0x40271f"],["0x405646","push ebx","0x402722"],["0x405647","push esi","0x402723"],["0x405648","push edi","0x402724"],["0x405649","mov dword ptr [ebp - 0x18], esp","0x402725"],["0x40564c","xor ebx, ebx","0x402728"],["0x40564e","mov dword ptr [ebp - 4], ebx","0x40272a"],["0x405651","push 2","0x40272d"],["0x405653","call dword ptr [->MSVCRT.dll::__set_app_type (IMPORT)]","0x40272f"],["0x405659","pop ecx","0x402735"]]},{"orig":[["0x40565a","or dword ptr [<OFFSET2>], 0xffffffff"],["0x405661","or dword ptr [<OFFSET3>], 0xffffffff"]],"recomp":[["0x402736","or dword ptr [___onexitend (UNK)], 0xffffffff"],["0x40273d","or dword ptr [___onexitbegin (UNK)], 0xffffffff"]]},{"both":[["0x405668","call dword ptr [->MSVCRT.dll::__p__fmode (IMPORT)]","0x402744"]]},{"orig":[["0x40566e","mov ecx, dword ptr [<OFFSET5>]"]],"recomp":[["0x40274a","mov ecx, dword ptr [__fmode (UNK)]"]]},{"both":[["0x405674","mov dword ptr [eax], ecx","0x402750"],["0x405676","call dword ptr [->MSVCRT.dll::__p__commode (IMPORT)]","0x402752"]]},{"orig":[["0x40567c","mov ecx, dword ptr [<OFFSET7>]"]],"recomp":[["0x402758","mov ecx, dword ptr [__commode (UNK)]"]]},{"both":[["0x405682","mov dword ptr [eax], ecx","0x40275e"],["0x405684","mov eax, dword ptr [MSVCRT.dll::_adjust_fdiv (IMPORT)]","0x402760"],["0x405689","mov eax, dword ptr [eax]","0x402765"]]},{"orig":[["0x40568b","mov dword ptr [<OFFSET9>], eax"],["0x405690","call <OFFSET10>"],["0x405695","cmp dword ptr [<OFFSET11>], ebx"]],"recomp":[["0x402767","mov dword ptr [__adjust_fdiv (UNK)], eax"],["0x40276c","call __setargv (UNK)"],["0x402771","cmp dword ptr [___defaultmatherr (UNK)], ebx"]]},{"both":[["0x40569b","jne 0xc","0x402777"]]},{"orig":[["0x40569d","push 0x4057a8"]],"recomp":[["0x402779","push __matherr (UNK)"]]},{"both":[["0x4056a2","call dword ptr [->MSVCRT.dll::__setusermatherr (IMPORT)]","0x40277e"],["0x4056a8","pop ecx","0x402784"]]},{"orig":[["0x4056a9","call <OFFSET13>"],["0x4056ae","push 0x51601c"],["0x4056b3","push 0x516018"],["0x4056b8","call <OFFSET14>"],["0x4056bd","mov eax, dword ptr [<OFFSET15>]"]],"recomp":[["0x402785","call __setdefaultprecision (UNK)"],["0x40278a","push ___xi_z (UNK)"],["0x40278f","push ___xi_a (UNK)"],["0x402794","call MSVCRT.dll::_initterm (IMPORT_THUNK)"],["0x402799","mov eax, dword ptr [__newmode (UNK)]"]]},{"both":[["0x4056c2","mov dword ptr [ebp - 0x6c], eax","0x40279e"],["0x4056c5","lea eax, [ebp - 0x6c]","0x4027a1"],["0x4056c8","push eax","0x4027a4"]]},{"orig":[["0x4056c9","push dword ptr [<OFFSET16>]"]],"recomp":[["0x4027a5","push dword ptr [__dowildcard (UNK)]"]]},{"both":[["0x4056cf","lea eax, [ebp - 0x64]","0x4027ab"],["0x4056d2","push eax","0x4027ae"],["0x4056d3","lea eax, [ebp - 0x70]","0x4027af"],["0x4056d6","push eax","0x4027b2"],["0x4056d7","lea eax, [ebp - 0x60]","0x4027b3"],["0x4056da","push eax","0x4027b6"],["0x4056db","call dword ptr [->MSVCRT.dll::__getmainargs (IMPORT)]","0x4027b7"]]},{"orig":[["0x4056e1","push 0x516014"],["0x4056e6","push 0x516000"],["0x4056eb","call <OFFSET14>"]],"recomp":[["0x4027bd","push ___xc_z (UNK)"],["0x4027c2","push ___xc_a (UNK)"],["0x4027c7","call MSVCRT.dll::_initterm (IMPORT_THUNK)"]]},{"both":[["0x4056f0","add esp, 0x24","0x4027cc"],["0x4056f3","mov eax, dword ptr [MSVCRT.dll::_acmdln (IMPORT)]","0x4027cf"],["0x4056f8","mov esi, dword ptr [eax]","0x4027d4"],["0x4056fa","mov dword ptr [ebp - 0x74], esi","0x4027d6"],["0x4056fd","cmp byte ptr [esi], 0x22","0x4027d9"],["0x405700","jne 0x3a","0x4027dc"],["0x405702","inc esi","0x4027de"],["0x405703","mov dword ptr [ebp - 0x74], esi","0x4027df"],["0x405706","mov al, byte ptr [esi]","0x4027e2"],["0x405708","cmp al, bl","0x4027e4"]]}]],["@@ -0x405742,27 +0x40281e,27 @@",[{"both":[["0x405742","mov dword ptr [ebp - 0x74], esi","0x40281e"],["0x405745","jmp -0xb","0x402821"],["0x405747","push 0xa","0x402823"],["0x405749","pop eax","0x402825"],["0x40574a","push eax","0x402826"],["0x40574b","push esi","0x402827"],["0x40574c","push ebx","0x402828"],["0x40574d","push ebx","0x402829"],["0x40574e","call dword ptr [->KERNEL32.dll::GetModuleHandleA (IMPORT)]","0x40282a"],["0x405754","push eax","0x402830"]]},{"orig":[["0x405755","call CMain::Initialize (FUNCTION)"]],"recomp":[["0x402831","call <OFFSET28>"]]},{"both":[["0x40575a","mov dword ptr [ebp - 0x68], eax","0x402836"],["0x40575d","push eax","0x402839"],["0x40575e","call dword ptr [->MSVCRT.dll::exit (IMPORT)]","0x40283a"],["0x405764","mov eax, dword ptr [ebp - 0x14]","0x402840"],["0x405767","mov ecx, dword ptr [eax]","0x402843"],["0x405769","mov ecx, dword ptr [ecx]","0x402845"],["0x40576b","mov dword ptr [ebp - 0x78], ecx","0x402847"],["0x40576e","push eax","0x40284a"],["0x40576f","push ecx","0x40284b"]]},{"orig":[["0x405770","call <OFFSET23>"]],"recomp":[["0x40284c","call MSVCRT.dll::_XcptFilter (IMPORT_THUNK)"]]},{"both":[["0x405775","pop ecx","0x402851"],["0x405776","pop ecx","0x402852"],["0x405777","ret ","0x402853"],["0x405778","mov esp, dword ptr [ebp - 0x18]","0x402854"],["0x40577b","push dword ptr [ebp - 0x78]","0x402857"],["0x40577e","call dword ptr [->MSVCRT.dll::_exit (IMPORT)]","0x40285a"]]}]]]},{"address":"0x4057f0","name":"CGameInfo::GetGameLanguage","matching":1.0,"recomp":"0x401a20"},{"address":"0x405800","name":"CGameInfo::GetGameRegion","matching":1.0,"recomp":"0x401a40"},{"address":"0x405820","name":"CGameInfo::GetGameRegionDirectory","matching":1.0,"recomp":"0x401a60"},{"address":"0x405c10","name":"CGameInfo::GetScreenWidth","matching":0.5,"recomp":"0x401ac0","diff":[["@@ -0x405c10,2 +0x401ac0,2 @@",[{"orig":[["0x405c10","mov eax, dword ptr [CGameInfo::m_gameInfo+36 (OFFSET)]"]],"recomp":[["0x401ac0","mov eax, dword ptr [CGameInfo::m_gameInfo+52 (OFFSET)] \t(GameInfo.cpp:48)"]]},{"both":[["0x405c15","ret  \t(GameInfo.cpp:50)","0x401ac5"]]}]]]},{"address":"0x405c20","name":"CGameInfo::SetScreenWidth","matching":0.6666666666666666,"recomp":"0x401b20","diff":[["@@ -0x405c20,3 +0x401b20,3 @@",[{"both":[["0x405c20","mov eax, dword ptr [esp + 4] \t(GameInfo.cpp:66)","0x401b20"]]},{"orig":[["0x405c24","mov dword ptr [CGameInfo::m_gameInfo+36 (OFFSET)], eax"]],"recomp":[["0x401b24","mov dword ptr [CGameInfo::m_gameInfo+52 (OFFSET)], eax"]]},{"both":[["0x405c29","ret 4 \t(GameInfo.cpp:68)","0x401b29"]]}]]]},{"address":"0x405c30","name":"CGameInfo::GetScreenHeight","matching":0.5,"recomp":"0x401ae0","diff":[["@@ -0x405c30,2 +0x401ae0,2 @@",[{"orig":[["0x405c30","mov eax, dword ptr [CGameInfo::m_gameInfo+40 (OFFSET)]"]],"recomp":[["0x401ae0","mov eax, dword ptr [CGameInfo::m_gameInfo+56 (OFFSET)] \t(GameInfo.cpp:54)"]]},{"both":[["0x405c35","ret  \t(GameInfo.cpp:56)","0x401ae5"]]}]]]},{"address":"0x405c40","name":"CGameInfo::SetScreenHeight","matching":0.6666666666666666,"recomp":"0x401b40","diff":[["@@ -0x405c40,3 +0x401b40,3 @@",[{"both":[["0x405c40","mov eax, dword ptr [esp + 4] \t(GameInfo.cpp:72)","0x401b40"]]},{"orig":[["0x405c44","mov dword ptr [CGameInfo::m_gameInfo+40 (OFFSET)], eax"]],"recomp":[["0x401b44","mov dword ptr [CGameInfo::m_gameInfo+56 (OFFSET)], eax"]]},{"both":[["0x405c49","ret 4 \t(GameInfo.cpp:74)","0x401b49"]]}]]]},{"address":"0x405c50","name":"CGameInfo::GetColourDepth","matching":0.5,"recomp":"0x401b00","diff":[["@@ -0x405c50,2 +0x401b00,2 @@",[{"orig":[["0x405c50","mov eax, dword ptr [CGameInfo::m_gameInfo+44 (OFFSET)]"]],"recomp":[["0x401b00","mov eax, dword ptr [CGameInfo::m_gameInfo+60 (OFFSET)] \t(GameInfo.cpp:60)"]]},{"both":[["0x405c55","ret  \t(GameInfo.cpp:62)","0x401b05"]]}]]]},{"address":"0x405c60","name":"CGameInfo::SetColourDepth","matching":0.6666666666666666,"recomp":"0x401b60","diff":[["@@ -0x405c60,3 +0x401b60,3 @@",[{"both":[["0x405c60","mov eax, dword ptr [esp + 4] \t(GameInfo.cpp:78)","0x401b60"]]},{"orig":[["0x405c64","mov dword ptr [CGameInfo::m_gameInfo+44 (OFFSET)], eax"]],"recomp":[["0x401b64","mov dword ptr [CGameInfo::m_gameInfo+60 (OFFSET)], eax"]]},{"both":[["0x405c69","ret 4 \t(GameInfo.cpp:80)","0x401b69"]]}]]]},{"address":"0x405d80","name":"CGameInfo::FUN_00405d80","matching":1.0,"recomp":"0x401a80"},{"address":"0x406910","name":"RallyDataCountryIndex","matching":1.0,"recomp":"0x402330"},{"address":"0x406930","name":"RallyDataStageIndex","matching":1.0,"recomp":"0x402350"},{"address":"0x4074f0","name":"RallyDataState","matching":1.0,"recomp":"0x402370"},{"address":"0x407ec0","name":"CAIHelper::GetNameForID","matching":0.6296296296296297,"recomp":"0x401280","diff":[["@@ -0x407ec0,27 +0x401280,27 @@",[{"orig":[["0x407ec0","call CGameInfo::FUN_00405d80 (FUNCTION)"]],"recomp":[["0x401280","call <OFFSET1> \t(AIHelper.cpp:44)"]]},{"both":[["0x407ec5","cmp al, 5 \t(AIHelper.cpp:50)","0x401285"],["0x407ec7","je 0x2e","0x401287"]]},{"orig":[["0x407ec9","call CGameInfo::FUN_00405d80 (FUNCTION)"]],"recomp":[["0x401289","call <OFFSET1> \t(AIHelper.cpp:52)"]]},{"both":[["0x407ece","cmp al, 6","0x40128e"],["0x407ed0","je 0x25","0x401290"]]},{"orig":[["0x407ed2","call CGameInfo::FUN_00405d80 (FUNCTION)"]],"recomp":[["0x401292","call <OFFSET1> \t(AIHelper.cpp:54)"]]},{"both":[["0x407ed7","cmp al, 7","0x401297"],["0x407ed9","je 0x1c","0x401299"],["0x407edb","mov eax, dword ptr [esp + 4] \t(AIHelper.cpp:56)","0x40129b"],["0x407edf","test eax, eax","0x40129f"],["0x407ee1","jl 0x5","0x4012a1"],["0x407ee3","cmp eax, 0xf","0x4012a3"],["0x407ee6","jle 0x2","0x4012a6"],["0x407ee8","xor eax, eax \t(AIHelper.cpp:57)","0x4012a8"],["0x407eea","lea eax, [eax + eax*4] \t(AIHelper.cpp:59)","0x4012aa"],["0x407eed","lea eax, [eax*4 + g_aiNames[0].[0] (DATA)]","0x4012ad"],["0x407ef4","ret 4 \t(AIHelper.cpp:67)","0x4012b4"]]},{"orig":[["0x407ef7","call RallyDataState (FUNCTION)"],["0x407efc","mov cl, al"],["0x407efe","mov eax, dword ptr [esp + 4]"],["0x407f02","and ecx, 0xff"],["0x407f08","sub eax, ecx"],["0x407f0a","push eax"],["0x407f0b","call CAIHelper::FUN_00407f80 (FUNCTION)"]],"recomp":[["0x4012b7","call <OFFSET3> \t(AIHelper.cpp:64)"],["0x4012bc","mov ecx, dword ptr [esp + 4] \t(AIHelper.cpp:65)"],["0x4012c0","and eax, 0xff \t(AIHelper.cpp:66)"],["0x4012c5","sub ecx, eax"],["0x4012c7","push ecx"],["0x4012c8","call <OFFSET4>"]]},{"both":[["0x407f10","lea edx, [eax + eax*4]","0x4012cd"],["0x407f13","lea eax, [edx*4 + g_aiNames[0].[0] (DATA)]","0x4012d0"]]},{"orig":[],"recomp":[["0x4012d7","ret 4 \t(AIHelper.cpp:67)"]]}]]]},{"address":"0x407f80","name":"CAIHelper::FUN_00407f80","matching":1.0,"recomp":"0x401230"},{"address":"0x40d100","name":"RallyTiming_ResetOverallPlayerTimes","matching":0.7368421052631579,"recomp":"0x402420","diff":[["@@ -0x40d100,9 +0x402420,10 @@",[{"orig":[],"recomp":[["0x402420","mov edx, dword ptr [unk0x533698 (DATA)] \t(RallyTiming.cpp:30)"]]},{"both":[["0x40d100","xor eax, eax","0x402426"],["0x40d102","mov ecx, g_rallyOverallTimesRaw[0] (DATA)","0x402428"],["0x40d107","mov dword ptr [ecx], 0 \t(RallyTiming.cpp:36)","0x40242d"],["0x40d10d","mov byte ptr [eax + g_rallyOverallOrderDriverID[0] (DATA)], al \t(RallyTiming.cpp:37)","0x402433"],["0x40d113","add ecx, 4 \t(RallyTiming.cpp:39)","0x402439"],["0x40d116","inc eax","0x40243c"]]},{"orig":[["0x40d117","cmp ecx, unk0x533698 (DATA)"],["0x40d11d","jl -0x18"]],"recomp":[["0x40243d","cmp ecx, edx"],["0x40243f","jb -0x14"]]},{"both":[["0x40d11f","ret  \t(RallyTiming.cpp:40)","0x402441"]]}]]]},{"address":"0x40d390","name":"RallyTiming_GetOverallPositionDriverID","matching":1.0,"recomp":"0x4023d0"},{"address":"0x40d3b0","name":"RallyTiming_GetOverallTimeForPosition","matching":0.3333333333333333,"recomp":"0x4023f0","diff":[["@@ -0x40d3b0,6 +0x4023f0,6 @@",[{"both":[["0x40d3b0","mov eax, dword ptr [esp + 4] \t(RallyTiming.cpp:21)","0x4023f0"]]},{"orig":[["0x40d3b4","movsx eax, byte ptr [eax + g_rallyOverallOrderDriverID[0] (DATA)]"],["0x40d3bb","mov ecx, dword ptr [eax*4 + g_rallyOverallTimesRaw[0] (DATA)]"],["0x40d3c2","push ecx"],["0x40d3c3","call ConvertRawTimeToCentiseconds (FUNCTION)"]],"recomp":[["0x4023f4","movsx ecx, byte ptr [eax + g_rallyOverallOrderDriverID[0] (DATA)]"],["0x4023fb","mov eax, dword ptr [ecx*4 + g_rallyOverallTimesRaw[0] (DATA)]"],["0x402402","push eax \t(RallyTiming.cpp:25)"],["0x402403","call <OFFSET3>"]]},{"both":[["0x40d3c8","ret 4 \t(RallyTiming.cpp:26)","0x402408"]]}]]]},{"address":"0x40d480","name":"ConvertRawTimeToCentiseconds","matching":0.13333333333333333,"recomp":"0x402640","diff":[["@@ -0x40d480,27 +0x402640,18 @@",[{"orig":[["0x40d480","push ebp"],["0x40d481","mov ebp, esp"],["0x40d483","mov eax, dword ptr [ebp + 8]"]],"recomp":[["0x402640","mov eax, dword ptr [esp + 4] \t(TimingUtils.cpp:16)"]]},{"both":[["0x40d486","add eax, 0x147","0x402644"]]},{"orig":[["0x40d48b","mov dword ptr [ebp + 8], eax"],["0x40d48e","mov eax, dword ptr [ebp + 8]"],["0x40d491","mov ecx, 0x28f5c28"],["0x40d496","cdq "],["0x40d497","shld edx, eax, 0x10"]],"recomp":[["0x402649","mov ecx, eax \t(TimingUtils.cpp:21)"],["0x40264b","mov edx, eax"],["0x40264d","sar ecx, 1"],["0x40264f","and edx, 0x80007fff"],["0x402655","or ecx, edx"],["0x402657","sar ecx, 0xf"]]},{"both":[["0x40d49b","shl eax, 0x10","0x40265a"]]},{"orig":[["0x40d49e","idiv ecx"],["0x40d4a0","pop ebp"]],"recomp":[["0x40265d","or ecx, eax"],["0x40265f","mov eax, 0x32000013"],["0x402664","imul ecx"],["0x402666","mov eax, edx"],["0x402668","sar eax, 0x17"],["0x40266b","mov ecx, eax"],["0x40266d","shr ecx, 0x1f"],["0x402670","add eax, ecx"]]},{"both":[["0x40d4a1","ret 4 \t(TimingUtils.cpp:22)","0x402672"]]},{"orig":[["0x40d4a4","nop "],["0x40d4a5","nop "],["0x40d4a6","nop "],["0x40d4a7","nop "],["0x40d4a8","nop "],["0x40d4a9","nop "],["0x40d4aa","nop "],["0x40d4ab","nop "],["0x40d4ac","nop "],["0x40d4ad","nop "],["0x40d4ae","nop "],["0x40d4af","nop "],["0x40d4b0","push ebp"],["0x40d4b1","mov ebp, esp"]],"recomp":[]}]]]},{"address":"0x40ed90","name":"CInstallInfo::GetFrontendDir","matching":1.0,"recomp":"0x401c90"},{"address":"0x40eda0","name":"CInstallInfo::GetCountrySpecificDir","matching":1.0,"recomp":"0x401cb0"},{"address":"0x415bd0","name":"FormatGapToLeader","matching":0.0,"recomp":"0x402500","stub":true},{"address":"0x415db0","name":"PrepareFormatGapToLeader","matching":0.9512195121951219,"recomp":"0x402520","diff":[["@@ -0x415dcf,31 +0x40253f,31 @@",[{"both":[["0x415dcf","mov ecx, dword ptr [esp + 0x20]","0x40253f"],["0x415dd3","push edx","0x402543"],["0x415dd4","mov edx, dword ptr [esp + 0x20]","0x402544"],["0x415dd8","push eax","0x402548"],["0x415dd9","mov eax, dword ptr [esp + 0x20]","0x402549"],["0x415ddd","push ecx","0x40254d"],["0x415dde","mov ecx, dword ptr [esp + 0x1c]","0x40254e"],["0x415de2","push edx","0x402552"],["0x415de3","push eax","0x402553"],["0x415de4","push ecx","0x402554"]]},{"orig":[["0x415de5","call FormatGapToLeader (FUNCTION)"]],"recomp":[["0x402555","call <OFFSET2> \t(StageUI.cpp:23)"]]},{"both":[["0x415dea","ret 0x28 \t(StageUI.cpp:24)","0x40255a"],["0x415ded","mov edx, dword ptr [esp + 0x28] \t(StageUI.cpp:23)","0x40255d"],["0x415df1","mov eax, dword ptr [esp + 0x20]","0x402561"],["0x415df5","mov ecx, dword ptr [esp + 0x1c]","0x402565"],["0x415df9","push edx","0x402569"],["0x415dfa","mov edx, dword ptr [esp + 0x1c]","0x40256a"],["0x415dfe","push g_positiveSymbol[0] (DATA)","0x40256e"],["0x415e03","push eax","0x402573"],["0x415e04","mov eax, dword ptr [esp + 0x20]","0x402574"],["0x415e08","push ecx","0x402578"],["0x415e09","mov ecx, dword ptr [esp + 0x20]","0x402579"],["0x415e0d","push edx","0x40257d"],["0x415e0e","mov edx, dword ptr [esp + 0x20]","0x40257e"],["0x415e12","push eax","0x402582"],["0x415e13","mov eax, dword ptr [esp + 0x1c]","0x402583"],["0x415e17","push ecx","0x402587"],["0x415e18","push edx","0x402588"],["0x415e19","push eax","0x402589"]]},{"orig":[["0x415e1a","call FormatGapToLeader (FUNCTION)"]],"recomp":[["0x40258a","call <OFFSET2>"]]},{"both":[["0x415e1f","ret 0x28 \t(StageUI.cpp:24)","0x40258f"]]}]]]},{"address":"0x455cf0","name":"StageTiming_GetDriverIDForPosition","matching":0.8,"recomp":"0x402480","diff":[["@@ -0x455cf0,5 +0x402480,5 @@",[{"orig":[["0x455cf0","call GetStageSplitCount (FUNCTION)"]],"recomp":[["0x402480","call <OFFSET1> \t(StageTiming.cpp:16)"]]},{"both":[["0x455cf5","mov ecx, dword ptr [esp + 4] \t(StageTiming.cpp:21)","0x402485"],["0x455cf9","shl eax, 4","0x402489"],["0x455cfc","movsx eax, byte ptr [eax + ecx + g_stageSplitDriverIndices[0].[0] (DATA)]","0x40248c"],["0x455d04","ret 4 \t(StageTiming.cpp:22)","0x402494"]]}]]]},{"address":"0x455d70","name":"StageTiming_GetTimeForPosition","matching":0.8888888888888888,"recomp":"0x4024b0","diff":[["@@ -0x455d70,18 +0x4024b0,18 @@",[{"both":[["0x455d70","push esi \t(StageTiming.cpp:26)","0x4024b0"],["0x455d71","mov esi, dword ptr [esp + 8]","0x4024b1"],["0x455d75","test esi, esi","0x4024b5"],["0x455d77","jl 0x28","0x4024b7"],["0x455d79","cmp esi, 0xf","0x4024b9"],["0x455d7c","jg 0x23","0x4024bc"]]},{"orig":[["0x455d7e","call GetStageSplitCount (FUNCTION)"]],"recomp":[["0x4024be","call <OFFSET1> \t(StageTiming.cpp:32)"]]},{"both":[["0x455d83","shl eax, 4 \t(StageTiming.cpp:33)","0x4024c3"],["0x455d86","movsx ecx, byte ptr [eax + esi + g_stageSplitTimesRawDriverIx[0].[0] (DATA)]","0x4024c6"],["0x455d8e","add ecx, eax","0x4024ce"],["0x455d90","mov eax, dword ptr [ecx*4 + g_stageSplitTimesRaw[0].[0] (DATA)]","0x4024d0"],["0x455d97","push eax \t(StageTiming.cpp:34)","0x4024d7"]]},{"orig":[["0x455d98","call ConvertRawTimeToCentiseconds (FUNCTION)"]],"recomp":[["0x4024d8","call <OFFSET4>"]]},{"both":[["0x455d9d","pop esi","0x4024dd"],["0x455d9e","ret 4 \t(StageTiming.cpp:38)","0x4024de"],["0x455da1","or eax, 0xffffffff \t(StageTiming.cpp:37)","0x4024e1"],["0x455da4","pop esi","0x4024e4"],["0x455da5","ret 4 \t(StageTiming.cpp:38)","0x4024e5"]]}]]]},{"address":"0x4583c0","name":"GetStageSplitCount","matching":1.0,"recomp":"0x402460"},{"address":"0x49c0a0","name":"FUN_0049c0a0","matching":0.0,"recomp":"0x402130","stub":true},{"address":"0x49c130","name":"CMain::FUN_0049c130","matching":0.0,"recomp":"0x402310","stub":true},{"address":"0x4a8140","name":"CMain::CreateGameWindow","matching":0.6492146596858639,"recomp":"0x402150","diff":[["@@ -0x4a8140,93 +0x402150,98 @@",[{"both":[["0x4a8140","sub esp, 0x28 \t(main.cpp:90)","0x402150"],["0x4a8143","mov eax, dword ptr [esp + 0x38] \t(main.cpp:102)","0x402153"]]},{"orig":[["0x4a8147","push ebx"]],"recomp":[["0x402157","push ebp"],["0x402158","mov ebp, dword ptr [esp + 0x30] \t(main.cpp:105)"]]},{"both":[["0x4a8148","push esi","0x40215c"],["0x4a8149","push edi","0x40215d"]]},{"orig":[["0x4a814a","mov edi, dword ptr [esp + 0x38]"]],"recomp":[["0x40215e","xor edi, edi"]]},{"both":[["0x4a814e","push 0x6e \t(main.cpp:106)","0x402160"]]},{"orig":[["0x4a8150","push edi"]],"recomp":[["0x402162","push ebp"]]},{"both":[["0x4a8151","mov dword ptr [esp + 0x18], eax","0x402163"]]},{"orig":[["0x4a8155","mov dword ptr [esp + 0x1c], 0"],["0x4a815d","mov dword ptr [esp + 0x20], 0"],["0x4a8165","mov dword ptr [esp + 0x24], edi"]],"recomp":[["0x402167","mov dword ptr [esp + 0x1c], edi"],["0x40216b","mov dword ptr [esp + 0x20], edi"],["0x40216f","mov dword ptr [esp + 0x24], ebp"]]},{"both":[["0x4a8169","call dword ptr [->USER32.dll::LoadIconA (IMPORT)]","0x402173"],["0x4a816f","push 4 \t(main.cpp:107)","0x402179"],["0x4a8171","mov dword ptr [esp + 0x24], eax","0x40217b"],["0x4a8175","call dword ptr [->GDI32.dll::GetStockObject (IMPORT)]","0x40217f"],["0x4a817b","mov ecx, dword ptr [g_pGraphics (DATA)] \t(main.cpp:113)","0x402185"],["0x4a8181","mov dword ptr [esp + 0x2c], m_lpszMenuName[0] (DATA)","0x40218b"],["0x4a8189","mov esi, dword ptr [esp + 0x40]","0x402193"],["0x4a818d","mov dword ptr [esp + 0x28], eax","0x402197"],["0x4a8191","mov dword ptr [esp + 0x30], esi","0x40219b"],["0x4a8195","mov dword ptr [esp + 0xc], 3","0x40219f"]]},{"orig":[["0x4a819d","mov eax, dword ptr [ecx + 0x1c]"],["0x4a81a0","test eax, eax"],["0x4a81a2","jne 0x18"]],"recomp":[["0x4021a7","cmp dword ptr [ecx + 0x1c], edi"],["0x4021aa","jne 0x12"]]},{"both":[["0x4a81a4","push 0x7f00 \t(main.cpp:114)","0x4021ac"]]},{"orig":[["0x4a81a9","push 0"]],"recomp":[["0x4021b1","push edi"]]},{"both":[["0x4a81ab","call dword ptr [->USER32.dll::LoadCursorA (IMPORT)]","0x4021b2"]]},{"orig":[["0x4a81b1","mov ebx, 0x81cf0000"]],"recomp":[]},{"both":[["0x4a81b6","mov dword ptr [esp + 0x24], eax","0x4021b8"]]},{"orig":[["0x4a81ba","jmp 0xa"],["0x4a81bc","mov dword ptr [esp + 0x24], 0"],["0x4a81c4","xor ebx, ebx"]],"recomp":[["0x4021bc","jmp 0x4 \t(main.cpp:115)"],["0x4021be","mov dword ptr [esp + 0x24], edi \t(main.cpp:116)"]]},{"both":[["0x4a81c6","lea edx, [esp + 0xc] \t(main.cpp:118)","0x4021c2"],["0x4a81ca","push edx","0x4021c6"],["0x4a81cb","call dword ptr [->USER32.dll::RegisterClassA (IMPORT)]","0x4021c7"],["0x4a81d1","test ax, ax \t(main.cpp:119)","0x4021cd"],["0x4a81d4","jne 0xb","0x4021d0"],["0x4a81d6","pop edi","0x4021d2"],["0x4a81d7","pop esi","0x4021d3"],["0x4a81d8","xor eax, eax \t(main.cpp:120)","0x4021d4"]]},{"orig":[["0x4a81da","pop ebx"]],"recomp":[["0x4021d6","pop ebp"]]},{"both":[["0x4a81db","add esp, 0x28 \t(main.cpp:146)","0x4021d7"],["0x4a81de","ret 0x10","0x4021da"]]},{"orig":[],"recomp":[["0x4021dd","mov edi, dword ptr [USER32.dll::GetSystemMetrics (IMPORT)] \t(main.cpp:125)"],["0x4021e3","push ebx"],["0x4021e4","push 1"],["0x4021e6","call edi"]]},{"both":[["0x4a81e1","push 0 \t(main.cpp:126)","0x4021e8"]]},{"orig":[["0x4a81e3","push edi"],["0x4a81e4","mov edi, dword ptr [USER32.dll::GetSystemMetrics (IMPORT)]"]],"recomp":[["0x4021ea","mov ebx, eax"],["0x4021ec","call edi"],["0x4021ee","push 0 \t(main.cpp:129)"],["0x4021f0","push ebp"]]},{"both":[["0x4a81ea","push 0","0x4021f1"],["0x4a81ec","push 0","0x4021f3"]]},{"orig":[["0x4a81ee","push 1"],["0x4a81f0","call edi"],["0x4a81f2","push eax"],["0x4a81f3","push 0"],["0x4a81f5","call edi"]],"recomp":[["0x4021f5","push ebx"]]},{"both":[["0x4a81f7","push eax","0x4021f6"],["0x4a81f8","push 0","0x4021f7"],["0x4a81fa","push 0","0x4021f9"]]},{"orig":[["0x4a81fc","push ebx"]],"recomp":[["0x4021fb","push 0x81cf0000"]]},{"both":[["0x4a81fd","push esi","0x402200"],["0x4a81fe","push esi","0x402201"],["0x4a81ff","push 0x40000","0x402202"],["0x4a8204","call dword ptr [->USER32.dll::CreateWindowExA (IMPORT)]","0x402207"],["0x4a820a","mov esi, eax","0x40220d"],["0x4a820c","mov eax, dword ptr [CMain::m_hWndIx (DATA)] \t(main.cpp:131)","0x40220f"],["0x4a8211","test esi, esi \t(main.cpp:132)","0x402214"],["0x4a8213","mov dword ptr [eax*4 + CMain::m_hWndList[0] (DATA)], esi","0x402216"]]},{"orig":[],"recomp":[["0x40221d","pop ebx"]]},{"both":[["0x4a821a","jne 0xb","0x40221e"],["0x4a821c","pop edi","0x402220"],["0x4a821d","pop esi","0x402221"],["0x4a821e","xor eax, eax \t(main.cpp:133)","0x402222"]]},{"orig":[["0x4a8220","pop ebx"]],"recomp":[["0x402224","pop ebp"]]},{"both":[["0x4a8221","add esp, 0x28 \t(main.cpp:146)","0x402225"],["0x4a8224","ret 0x10","0x402228"],["0x4a8227","mov ecx, dword ptr [g_pGraphics (DATA)] \t(main.cpp:135)","0x40222b"],["0x4a822d","mov eax, dword ptr [ecx + 0x1c]","0x402231"]]},{"orig":[["0x4a8230","test eax, eax"],["0x4a8232","jne 0x4"],["0x4a8234","push 0"],["0x4a8236","jmp 0x2"],["0x4a8238","push 3"]],"recomp":[["0x402234","neg eax"],["0x402236","sbb eax, eax"],["0x402238","and al, 0xf9"],["0x40223a","add eax, 0xa"],["0x40223d","push eax \t(main.cpp:140)"]]},{"both":[["0x4a823a","push esi","0x40223e"],["0x4a823b","call dword ptr [->USER32.dll::ShowWindow (IMPORT)]","0x40223f"],["0x4a8241","push esi \t(main.cpp:141)","0x402245"],["0x4a8242","call dword ptr [->USER32.dll::UpdateWindow (IMPORT)]","0x402246"],["0x4a8248","push esi \t(main.cpp:142)","0x40224c"],["0x4a8249","call dword ptr [->USER32.dll::SetFocus (IMPORT)]","0x40224d"],["0x4a824f","push 0 \t(main.cpp:144)","0x402253"]]},{"orig":[["0x4a8251","push FUN_004a8270 (FUNCTION)"]],"recomp":[["0x402255","push <OFFSET14>"]]},{"both":[["0x4a8256","mov edx, dword ptr [esp + 0x44]","0x40225a"],["0x4a825a","mov dword ptr [edx], esi","0x40225e"]]},{"orig":[["0x4a825c","call FUN_0049c0a0 (FUNCTION)"]],"recomp":[["0x402260","call <OFFSET15>"]]},{"both":[["0x4a8261","pop edi","0x402265"],["0x4a8262","pop esi","0x402266"]]},{"orig":[],"recomp":[["0x402267","mov eax, 1 \t(main.cpp:145)"],["0x40226c","pop ebp"],["0x40226d","add esp, 0x28 \t(main.cpp:146)"],["0x402270","ret 0x10"]]}]]]},{"address":"0x4a8270","name":"FUN_004a8270","matching":0.0,"recomp":"0x402110","stub":true},{"address":"0x4a9700","name":"CFrontend::FUN_004a9700","matching":1.0,"recomp":"0x4019f0"},{"address":"0x4a9720","name":"CMain::Initialize","matching":0.18285714285714286,"recomp":"0x401f80","diff":[["@@ -0x4a9720,86 +0x401f80,89 @@",[{"orig":[],"recomp":[["0x401f80","sub esp, 0x1c \t(main.cpp:29)"]]},{"both":[["0x4a9720","push CMain::m_gameName[0] (DATA) \t(main.cpp:31)","0x401f83"],["0x4a9725","push CMain::m_gameName[0] (DATA)","0x401f88"],["0x4a972a","call dword ptr [->USER32.dll::FindWindowA (IMPORT)]","0x401f8d"],["0x4a9730","test eax, eax \t(main.cpp:32)","0x401f93"]]},{"orig":[["0x4a9732","je 0x5"],["0x4a9734","xor eax, eax"],["0x4a9736","ret 0x10"],["0x4a9739","push esi"]],"recomp":[["0x401f95","je 0x8"],["0x401f97","xor al, al \t(main.cpp:33)"],["0x401f99","add esp, 0x1c \t(main.cpp:72)"],["0x401f9c","ret 0xc"],["0x401f9f","push edi"]]},{"both":[["0x4a973a","push CMain::m_logFileLocation[0] (DATA) \t(main.cpp:35)","0x401fa0"]]},{"orig":[["0x4a973f","call CLogger::OpenLogFile (FUNCTION)"]],"recomp":[["0x401fa5","call <OFFSET4>"]]},{"both":[["0x4a9744","push CMain::m_logFileHeader1[0] (DATA) \t(main.cpp:36)","0x401faa"]]},{"orig":[["0x4a9749","call CLogger::LogToFile (FUNCTION)"]],"recomp":[["0x401faf","call <OFFSET6>"]]},{"both":[["0x4a974e","push CMain::m_logFileAsterisks[0] (DATA) \t(main.cpp:37)","0x401fb4"]]},{"orig":[["0x4a9753","call CLogger::LogToFile (FUNCTION)"]],"recomp":[["0x401fb9","call <OFFSET6>"]]},{"both":[["0x4a9758","push CMain::m_logFileBlankLine[0] (DATA) \t(main.cpp:38)","0x401fbe"]]},{"orig":[["0x4a975d","call CLogger::LogToFile (FUNCTION)"],["0x4a9762","mov esi, dword ptr [esp + 8]"],["0x4a9766","mov dword ptr [CMain::m_hInstance (DATA)], esi"],["0x4a976c","call <OFFSET10>"],["0x4a9771","call <OFFSET11>"],["0x4a9776","call <OFFSET12>"],["0x4a977b","mov eax, dword ptr [esp + 0x10]"]],"recomp":[["0x401fc3","call <OFFSET6>"],["0x401fc8","mov ecx, dword ptr [CMain::m_hWndIx (DATA)] \t(main.cpp:41)"],["0x401fce","push <OFFSET10>"],["0x401fd3","mov eax, dword ptr [esp + 0x28]"],["0x401fd7","push CMain::m_gameName[0] (DATA)"],["0x401fdc","lea edx, [ecx*4 + CMain::m_hWndList[0] (DATA)]"],["0x401fe3","mov dword ptr [CMain::m_hInstance (DATA)], eax"],["0x401fe8","push edx"]]},{"both":[["0x4a977f","push eax","0x401fe9"],["0x4a9780","call <OFFSET13>","0x401fea"]]},{"orig":[["0x4a9785","mov ecx, dword ptr [CMain::m_hWndIx (DATA)]"],["0x4a978b","push CMain::MessageHandler (FUNCTION)"],["0x4a9790","push CMain::m_gameName[0] (DATA)"],["0x4a9795","lea edx, [ecx*4 + CMain::m_hWndList[0] (DATA)]"]],"recomp":[["0x401fef","mov edi, dword ptr [USER32.dll::GetMessageA (IMPORT)] \t(main.cpp:44)"],["0x401ff5","push 0"],["0x401ff7","push 0"],["0x401ff9","lea eax, [esp + 0xc]"],["0x401ffd","push 0"],["0x401fff","push eax"],["0x402000","call edi"],["0x402002","test eax, eax"],["0x402004","je 0x6e"],["0x402006","push ebx"],["0x402007","mov ebx, dword ptr [USER32.dll::TranslateMessage (IMPORT)]"],["0x40200d","push ebp"],["0x40200e","mov ebp, dword ptr [USER32.dll::DispatchMessageA (IMPORT)]"],["0x402014","push esi"],["0x402015","mov esi, dword ptr [USER32.dll::ShowCursor (IMPORT)]"],["0x40201b","lea ecx, [esp + 0x10] \t(main.cpp:46)"],["0x40201f","push ecx"],["0x402020","call ebx"],["0x402022","lea edx, [esp + 0x10] \t(main.cpp:47)"]]},{"both":[["0x4a979c","push edx","0x402026"]]},{"orig":[["0x4a979d","push esi"],["0x4a979e","call CMain::CreateGameWindow (FUNCTION)"],["0x4a97a3","mov eax, dword ptr [<OFFSET18>]"],["0x4a97a8","xor esi, esi"],["0x4a97aa","cmp eax, esi"],["0x4a97ac","jne 0xb4"],["0x4a97b2","push ebx"],["0x4a97b3","mov ebx, dword ptr [USER32.dll::PeekMessageA (IMPORT)]"],["0x4a97b9","push ebp"],["0x4a97ba","mov ebp, dword ptr [USER32.dll::GetMessageA (IMPORT)]"],["0x4a97c0","push edi"],["0x4a97c1","mov edi, dword ptr [USER32.dll::ShowCursor (IMPORT)]"],["0x4a97c7","cmp dword ptr [<OFFSET22>], esi"],["0x4a97cd","jne 0xe"],["0x4a97cf","push 1"],["0x4a97d1","push esi"],["0x4a97d2","push esi"],["0x4a97d3","push esi"],["0x4a97d4","push 0x663c68"],["0x4a97d9","call ebx"],["0x4a97db","jmp 0xa"],["0x4a97dd","push esi"],["0x4a97de","push esi"],["0x4a97df","push esi"],["0x4a97e0","push 0x663c68"]],"recomp":[]},{"both":[["0x4a97e5","call ebp","0x402027"]]},{"orig":[["0x4a97e7","mov ecx, dword ptr [<OFFSET23>]"],["0x4a97ed","cmp ecx, 0x1c"],["0x4a97f0","je 0x21"],["0x4a97f2","cmp eax, esi"],["0x4a97f4","je 0x1d"],["0x4a97f6","cmp ecx, 0x12"],["0x4a97f9","je 0x68"],["0x4a97fb","push 0x663c68"],["0x4a9800","call dword ptr [->USER32.dll::TranslateMessage (IMPORT)]"],["0x4a9806","push 0x663c68"],["0x4a980b","call dword ptr [->USER32.dll::DispatchMessageA (IMPORT)]"],["0x4a9811","jmp 0x12"],["0x4a9813","cmp dword ptr [<OFFSET22>], esi"],["0x4a9819","jne 0xa"],["0x4a981b","call <OFFSET26>"],["0x4a9820","call <OFFSET27>"]],"recomp":[]},{"both":[["0x4a9825","mov eax, dword ptr [g_pGraphics (DATA)] \t(main.cpp:49)","0x402029"],["0x4a982a","mov ecx, dword ptr [eax + 0x1c]","0x40202e"],["0x4a982d","mov eax, dword ptr [CMain::m_isShowingCursor (DATA)] \t(main.cpp:51)","0x402031"]]},{"orig":[["0x4a9832","cmp ecx, esi"],["0x4a9834","je 0xf"],["0x4a9836","cmp eax, esi"],["0x4a9838","je 0x1d"],["0x4a983a","push esi"]],"recomp":[["0x402036","test ecx, ecx"],["0x402038","jne 0x14"],["0x40203a","test eax, eax"],["0x40203c","jne 0x22"],["0x40203e","push 1 \t(main.cpp:53)"],["0x402040","call esi"],["0x402042","mov dword ptr [CMain::m_isShowingCursor (DATA)], 1 \t(main.cpp:54)"],["0x40204c","jmp 0x12 \t(main.cpp:57)"],["0x40204e","test eax, eax"],["0x402050","je 0xe"],["0x402052","push 0 \t(main.cpp:59)"],["0x402054","call esi"],["0x402056","mov dword ptr [CMain::m_isShowingCursor (DATA)], 0 \t(main.cpp:60)"],["0x402060","push 0"],["0x402062","push 0"],["0x402064","lea ecx, [esp + 0x18]"],["0x402068","push 0"],["0x40206a","push ecx"]]},{"both":[["0x4a983b","call edi","0x40206b"]]},{"orig":[["0x4a983d","mov dword ptr [CMain::m_isShowingCursor (DATA)], esi"],["0x4a9843","jmp 0x12"],["0x4a9845","cmp eax, esi"],["0x4a9847","jne 0xe"],["0x4a9849","push 1"],["0x4a984b","call edi"]],"recomp":[["0x40206d","test eax, eax"],["0x40206f","jne -0x56"],["0x402071","pop esi"],["0x402072","pop ebp"],["0x402073","pop ebx"],["0x402074","call <OFFSET20> \t(main.cpp:64)"],["0x402079","push CMain::m_logFileBlankLine[0] (DATA) \t(main.cpp:65)"],["0x40207e","call <OFFSET6>"],["0x402083","push CMain::m_logFileAsterisks[0] (DATA) \t(main.cpp:66)"],["0x402088","call <OFFSET6>"],["0x40208d","push CMain::m_logFileFinishedNormally[0] (DATA) \t(main.cpp:67)"],["0x402092","call <OFFSET6>"],["0x402097","push CMain::m_logFileAsterisks[0] (DATA) \t(main.cpp:68)"],["0x40209c","call <OFFSET6>"],["0x4020a1","call <OFFSET22> \t(main.cpp:69)"],["0x4020a6","mov al, byte ptr [CMain::m_unk0x00663c70 (DATA)] \t(main.cpp:71)"],["0x4020ab","pop edi"],["0x4020ac","add esp, 0x1c \t(main.cpp:72)"],["0x4020af","ret 0xc"]]}]]]},{"address":"0x4a98b0","name":"CMain::MessageHandler","matching":0.13793103448275862,"recomp":"0x4022d0","diff":[["@@ -0x4a98b0,12 +0x4022d0,17 @@",[{"both":[["0x4a98b0","push esi \t(main.cpp:150)","0x4022d0"],["0x4a98b1","mov esi, dword ptr [esp + 0xc]","0x4022d1"]]},{"orig":[["0x4a98b5","push edi"],["0x4a98b6","mov edi, dword ptr [esp + 0x18]"],["0x4a98ba","cmp esi, 0x1c"],["0x4a98bd","ja 0xc4"],["0x4a98c3","cmp esi, 0x1c"],["0x4a98c6","je 0x83"],["0x4a98cc","lea eax, [esi - 2]"],["0x4a98cf","cmp eax, 0xe"],["0x4a98d2","ja 0xf6"],["0x4a98d8","xor ecx, ecx"]],"recomp":[["0x4022d5","mov eax, esi"],["0x4022d7","sub eax, 2"],["0x4022da","jne 0x8"],["0x4022dc","push 0 \t(main.cpp:172)"],["0x4022de","call dword ptr [->USER32.dll::PostQuitMessage (IMPORT)]"],["0x4022e4","mov eax, dword ptr [esp + 0x14] \t(main.cpp:176)"],["0x4022e8","mov ecx, dword ptr [esp + 0x10]"],["0x4022ec","mov edx, dword ptr [esp + 8]"],["0x4022f0","push eax"],["0x4022f1","push ecx"],["0x4022f2","push esi"],["0x4022f3","push edx"],["0x4022f4","call dword ptr [->USER32.dll::DefWindowProcA (IMPORT)]"],["0x4022fa","pop esi"],["0x4022fb","ret 0x10 \t(main.cpp:177)"]]}]]]},{"address":"0x4a9c30","name":"CGenericFileLoader::FUN_004a9c30","matching":0.8888888888888888,"recomp":"0x401c00","diff":[["@@ -0x4a9c30,18 +0x401c00,18 @@",[{"both":[["0x4a9c30","mov eax, dword ptr [esp + 4] \t(GenericFileLoader.cpp:19)","0x401c00"],["0x4a9c34","push esi","0x401c04"],["0x4a9c35","push 0","0x401c05"],["0x4a9c37","push eax","0x401c07"]]},{"orig":[["0x4a9c38","call CFileBuffer::GetGenericFileBuffer (FUNCTION)"]],"recomp":[["0x401c08","call <OFFSET1>"]]},{"both":[["0x4a9c3d","test eax, eax \t(GenericFileLoader.cpp:21)","0x401c0d"],["0x4a9c3f","mov esi, dword ptr [esp + 0xc]","0x401c0f"],["0x4a9c43","mov dword ptr [esi], eax","0x401c13"],["0x4a9c45","je 0xe","0x401c15"]]},{"orig":[["0x4a9c47","call CGenericFileLoader::GetGenericFileSize (FUNCTION)"]],"recomp":[["0x401c17","call <OFFSET2> \t(GenericFileLoader.cpp:23)"]]},{"both":[["0x4a9c4c","mov dword ptr [esi + 4], eax","0x401c1c"],["0x4a9c4f","mov al, 1 \t(GenericFileLoader.cpp:24)","0x401c1f"],["0x4a9c51","pop esi","0x401c21"],["0x4a9c52","ret 8 \t(GenericFileLoader.cpp:29)","0x401c22"],["0x4a9c55","mov dword ptr [esi + 4], 0 \t(GenericFileLoader.cpp:27)","0x401c25"],["0x4a9c5c","xor al, al \t(GenericFileLoader.cpp:28)","0x401c2c"],["0x4a9c5e","pop esi","0x401c2e"],["0x4a9c5f","ret 8 \t(GenericFileLoader.cpp:29)","0x401c2f"]]}]]]},{"address":"0x4a9d70","name":"CGenericFileLoader::FUN_004a9d70","matching":0.9375,"recomp":"0x401bc0","diff":[["@@ -0x4a9d70,16 +0x401bc0,16 @@",[{"both":[["0x4a9d70","mov eax, dword ptr [esp + 8] \t(GenericFileLoader.cpp:9)","0x401bc0"],["0x4a9d74","push esi","0x401bc4"],["0x4a9d75","mov esi, dword ptr [esp + 8]","0x401bc5"],["0x4a9d79","push esi","0x401bc9"],["0x4a9d7a","push eax","0x401bca"],["0x4a9d7b","mov dword ptr [esi + 8], 0","0x401bcb"]]},{"orig":[["0x4a9d82","call CGenericFileLoader::FUN_004a9c30 (FUNCTION)"]],"recomp":[["0x401bd2","call <OFFSET1>"]]},{"both":[["0x4a9d87","test al, al","0x401bd7"],["0x4a9d89","je 0xc","0x401bd9"],["0x4a9d8b","mov eax, 1 \t(GenericFileLoader.cpp:12)","0x401bdb"],["0x4a9d90","mov dword ptr [esi + 8], eax","0x401be0"],["0x4a9d93","pop esi","0x401be3"],["0x4a9d94","ret 8 \t(GenericFileLoader.cpp:15)","0x401be4"],["0x4a9d97","xor al, al \t(GenericFileLoader.cpp:14)","0x401be7"],["0x4a9d99","pop esi","0x401be9"],["0x4a9d9a","ret 8 \t(GenericFileLoader.cpp:15)","0x401bea"]]}]]]},{"address":"0x4aa220","name":"CFileBuffer::GetGenericFileBuffer","matching":0.36199095022624433,"recomp":"0x4013c0","diff":[["@@ -0x4aa220,219 +0x4013c0,223 @@",[{"orig":[],"recomp":[["0x4013c0","mov eax, dword ptr [esp + 4] \t(FileBuffer.cpp:51)"]]},{"both":[["0x4aa220","sub esp, 0x110","0x4013c4"]]},{"orig":[["0x4aa226","lea eax, [esp + 0xc]"]],"recomp":[["0x4013ca","lea ecx, [esp + 0xc]"]]},{"both":[["0x4aa22a","push ebx","0x4013ce"],["0x4aa22b","push ebp","0x4013cf"]]},{"orig":[["0x4aa22c","mov ebp, dword ptr [esp + 0x11c]"]],"recomp":[]},{"both":[["0x4aa233","push esi","0x4013d0"],["0x4aa234","push edi","0x4013d1"]]},{"orig":[["0x4aa235","push ebp"]],"recomp":[]},{"both":[["0x4aa236","push eax","0x4013d2"]]},{"orig":[["0x4aa237","xor edi, edi"],["0x4aa239","xor ebx, ebx"],["0x4aa23b","call <OFFSET1>"]],"recomp":[["0x4013d3","push ecx"],["0x4013d4","xor ebp, ebp"],["0x4013d6","xor bl, bl"],["0x4013d8","call dword ptr [->MSVCRT.dll::sprintf (IMPORT)]"]]},{"both":[["0x4aa240","add esp, 8","0x4013de"]]},{"orig":[["0x4aa243","lea ecx, [esp + 0x1c]"],["0x4aa247","push 0x520f1c"],["0x4aa24c","push ecx"],["0x4aa24d","call CFileBuffer::FUN_004bdee0 (FUNCTION)"]],"recomp":[["0x4013e1","lea edx, [esp + 0x1c] \t(FileBuffer.cpp:67)"],["0x4013e5","push CFileBuffer::m_unk0x00520f1c (DATA)"],["0x4013ea","push edx"],["0x4013eb","call <OFFSET3>"]]},{"both":[["0x4aa252","mov esi, eax","0x4013f0"],["0x4aa254","test esi, esi \t(FileBuffer.cpp:68)","0x4013f2"]]},{"orig":[["0x4aa256","jne 0xc5"]],"recomp":[["0x4013f4","jne 0x6a"]]},{"both":[["0x4aa25c","mov eax, dword ptr [esp + 0x128] \t(FileBuffer.cpp:70)","0x4013f6"]]},{"orig":[["0x4aa263","mov ecx, dword ptr [g_pGraphics (DATA)]"]],"recomp":[]},{"both":[["0x4aa269","test eax, eax","0x4013fd"],["0x4aa26b","jne 0x5f","0x4013ff"]]},{"orig":[],"recomp":[["0x401401","mov ecx, dword ptr [g_pGraphics (DATA)] \t(FileBuffer.cpp:73)"]]},{"both":[["0x4aa26d","test ecx, ecx","0x401407"]]},{"orig":[["0x4aa26f","je 0x6f"]],"recomp":[["0x401409","je 0x71"]]},{"both":[["0x4aa271","mov eax, dword ptr [ecx + 0x3b8] \t(FileBuffer.cpp:76)","0x40140b"]]},{"orig":[],"recomp":[["0x401411","mov eax, dword ptr [eax]"]]},{"both":[["0x4aa277","test eax, eax \t(FileBuffer.cpp:77)","0x401413"]]},{"orig":[["0x4aa279","je 0x51"],["0x4aa27b","mov edx, dword ptr [eax]"]],"recomp":[["0x401415","je 0x4f"],["0x401417","mov ecx, dword ptr [eax] \t(FileBuffer.cpp:79)"]]},{"both":[["0x4aa27d","push eax","0x401419"]]},{"orig":[["0x4aa27e","call dword ptr [edx + 0x28]"],["0x4aa281","mov ebp, dword ptr [USER32.dll::ShowCursor (IMPORT)]"]],"recomp":[["0x40141a","call dword ptr [ecx + 0x28]"],["0x40141d","mov edi, dword ptr [USER32.dll::ShowCursor (IMPORT)] \t(FileBuffer.cpp:80)"]]},{"both":[["0x4aa287","push 1","0x401423"]]},{"orig":[["0x4aa289","call ebp"],["0x4aa28b","call CInstallInfo::ShowNoCDErrorMessage (FUNCTION)"]],"recomp":[["0x401425","call edi"],["0x401427","push 0 \t(FileBuffer.cpp:84)"],["0x401429","call <OFFSET6>"]]},{"both":[["0x4aa290","test eax, eax","0x40142e"],["0x4aa292","je 0x11","0x401430"]]},{"orig":[["0x4aa294","lea eax, [esp + 0x1c]"],["0x4aa298","push 0x520f1c"],["0x4aa29d","push eax"],["0x4aa29e","call CFileBuffer::FUN_004bdee0 (FUNCTION)"]],"recomp":[["0x401432","lea edx, [esp + 0x1c] \t(FileBuffer.cpp:85)"],["0x401436","push CFileBuffer::m_unk0x00520f1c (DATA)"],["0x40143b","push edx"],["0x40143c","call <OFFSET3>"]]},{"both":[["0x4aa2a3","mov esi, eax","0x401441"],["0x4aa2a5","test esi, esi \t(FileBuffer.cpp:86)","0x401443"]]},{"orig":[["0x4aa2a7","je -0x1e"]],"recomp":[["0x401445","je -0x20"]]},{"both":[["0x4aa2a9","push 0 \t(FileBuffer.cpp:88)","0x401447"]]},{"orig":[["0x4aa2ab","call ebp"],["0x4aa2ad","mov ecx, dword ptr [CMain::m_hWndIx (DATA)]"]],"recomp":[["0x401449","call edi"],["0x40144b","mov eax, dword ptr [CMain::m_hWndIx (DATA)] \t(FileBuffer.cpp:89)"]]},{"both":[["0x4aa2b3","push 9","0x401450"]]},{"orig":[["0x4aa2b5","mov edx, dword ptr [ecx*4 + CMain::m_hWndList[0] (DATA)]"],["0x4aa2bc","push edx"]],"recomp":[["0x401452","mov ecx, dword ptr [eax*4 + CMain::m_hWndList[0] (DATA)]"],["0x401459","push ecx"]]},{"both":[["0x4aa2bd","call dword ptr [->USER32.dll::ShowWindow (IMPORT)]","0x40145a"]]},{"orig":[["0x4aa2c3","mov ebp, dword ptr [esp + 0x124]"],["0x4aa2ca","jmp 0x55"]],"recomp":[["0x401460","mov ecx, dword ptr [g_pGraphics (DATA)]"]]},{"both":[["0x4aa2cc","test ecx, ecx \t(FileBuffer.cpp:95)","0x401466"]]},{"orig":[["0x4aa2ce","je 0x10"]],"recomp":[["0x401468","je 0x12"]]},{"both":[["0x4aa2d0","mov ecx, dword ptr [ecx + 0x3b8] \t(FileBuffer.cpp:97)","0x40146a"],["0x4aa2d6","test ecx, ecx","0x401470"]]},{"orig":[["0x4aa2d8","je 0x6"],["0x4aa2da","mov eax, dword ptr [ecx]"]],"recomp":[["0x401472","je 0x8"],["0x401474","mov ecx, dword ptr [ecx] \t(FileBuffer.cpp:98)"]]},{"both":[["0x4aa2dc","push ecx","0x401476"]]},{"orig":[["0x4aa2dd","call dword ptr [eax + 0x28]"],["0x4aa2e0","lea ecx, [esp + 0x1c]"],["0x4aa2e4","push ecx"],["0x4aa2e5","call dword ptr [->KERNEL32.dll::GetFileAttributesA (IMPORT)]"],["0x4aa2eb","cmp eax, -1"],["0x4aa2ee","jne 0xf"],["0x4aa2f0","pop edi"],["0x4aa2f1","pop esi"],["0x4aa2f2","pop ebp"],["0x4aa2f3","xor eax, eax"],["0x4aa2f5","pop ebx"],["0x4aa2f6","add esp, 0x110"],["0x4aa2fc","ret 8"],["0x4aa2ff","mov eax, dword ptr [<OFFSET10>]"],["0x4aa304","inc eax"],["0x4aa305","cmp eax, 0x32"],["0x4aa308","mov dword ptr [<OFFSET10>], eax"],["0x4aa30d","jge 0x13b"],["0x4aa313","mov edx, dword ptr [esp + 0x128]"],["0x4aa31a","push edx"],["0x4aa31b","push ebp"],["0x4aa31c","call CFileBuffer::GetGenericFileBuffer (FUNCTION)"],["0x4aa321","lea eax, [esp + 0x10]"],["0x4aa325","push 8"],["0x4aa327","push eax"],["0x4aa328","push esi"],["0x4aa329","call CFileBuffer::FUN_004be660 (FUNCTION)"],["0x4aa32e","cmp eax, 8"],["0x4aa331","jne 0x52"],["0x4aa333","cmp byte ptr [esp + 0x10], 0x43"],["0x4aa338","jne 0x4b"],["0x4aa33a","cmp byte ptr [esp + 0x11], 0x4d"],["0x4aa33f","jne 0x44"],["0x4aa341","cmp byte ptr [esp + 0x12], 0x50"],["0x4aa346","jne 0x3d"],["0x4aa348","cmp byte ptr [esp + 0x13], 0x52"],["0x4aa34d","jne 0x36"],["0x4aa34f","mov eax, dword ptr [esp + 0x14]"],["0x4aa353","cmp eax, -1"],["0x4aa356","jne 0xf"],["0x4aa358","pop edi"],["0x4aa359","pop esi"],["0x4aa35a","pop ebp"],["0x4aa35b","xor eax, eax"],["0x4aa35d","pop ebx"],["0x4aa35e","add esp, 0x110"],["0x4aa364","ret 8"],["0x4aa367","push eax"],["0x4aa368","call CFileBuffer::AllocateLockedBuffer (FUNCTION)"],["0x4aa36d","mov edi, eax"],["0x4aa36f","mov eax, dword ptr [esp + 0x14]"],["0x4aa373","push eax"],["0x4aa374","push edi"],["0x4aa375","push esi"],["0x4aa376","mov dword ptr [CGenericFileLoader::m_unk0x00663fe8 (DATA)], eax"],["0x4aa37b","call CFileBuffer::FUN_004be660 (FUNCTION)"],["0x4aa380","mov ebx, 1"],["0x4aa385","push esi"],["0x4aa386","call <OFFSET15>"],["0x4aa38b","test ebx, ebx"],["0x4aa38d","jne 0xd1"],["0x4aa393","push ebx"],["0x4aa394","push 0x80"],["0x4aa399","push 3"],["0x4aa39b","push ebx"],["0x4aa39c","push 1"],["0x4aa39e","lea ecx, [esp + 0x30]"],["0x4aa3a2","push 0x80000000"],["0x4aa3a7","push ecx"],["0x4aa3a8","call dword ptr [->KERNEL32.dll::CreateFileA (IMPORT)]"],["0x4aa3ae","mov ebx, eax"],["0x4aa3b0","cmp ebx, -1"],["0x4aa3b3","jne 0x56"],["0x4aa3b5","mov eax, dword ptr [g_pGraphics (DATA)]"],["0x4aa3ba","test eax, eax"],["0x4aa3bc","je 0x10"],["0x4aa3be","mov eax, dword ptr [eax + 0x3b8]"],["0x4aa3c4","test eax, eax"],["0x4aa3c6","je 0x6"],["0x4aa3c8","mov edx, dword ptr [eax]"],["0x4aa3ca","push eax"]],"recomp":[["0x401477","mov edx, dword ptr [ecx]"]]},{"both":[["0x4aa3cb","call dword ptr [edx + 0x28]","0x401479"],["0x4aa3ce","lea eax, [esp + 0x1c] \t(FileBuffer.cpp:102)","0x40147c"],["0x4aa3d2","push eax","0x401480"],["0x4aa3d3","call dword ptr [->KERNEL32.dll::GetFileAttributesA (IMPORT)]","0x401481"],["0x4aa3d9","cmp eax, -1 \t(FileBuffer.cpp:103)","0x401487"],["0x4aa3dc","jne 0xf","0x40148a"],["0x4aa3de","pop edi","0x40148c"],["0x4aa3df","pop esi","0x40148d"],["0x4aa3e0","pop ebp","0x40148e"],["0x4aa3e1","xor eax, eax \t(FileBuffer.cpp:104)","0x40148f"],["0x4aa3e3","pop ebx","0x401491"],["0x4aa3e4","add esp, 0x110 \t(FileBuffer.cpp:161)","0x401492"],["0x4aa3ea","ret 8","0x401498"]]},{"orig":[["0x4aa3ed","mov eax, dword ptr [<OFFSET17>]"]],"recomp":[["0x40149b","mov eax, dword ptr [CFileBuffer::m_unk0x0066461c (DATA)] \t(FileBuffer.cpp:107)"]]},{"both":[["0x4aa3f2","inc eax","0x4014a0"],["0x4aa3f3","cmp eax, 0x32","0x4014a1"]]},{"orig":[["0x4aa3f6","mov dword ptr [<OFFSET17>], eax"],["0x4aa3fb","jge 0x51"]],"recomp":[["0x4014a4","mov dword ptr [CFileBuffer::m_unk0x0066461c (DATA)], eax"],["0x4014a9","jge 0x22"]]},{"both":[["0x4aa3fd","mov ecx, dword ptr [esp + 0x128] \t(FileBuffer.cpp:108)","0x4014ab"]]},{"orig":[],"recomp":[["0x4014b2","mov edx, dword ptr [esp + 0x124]"]]},{"both":[["0x4aa404","push ecx","0x4014b9"]]},{"orig":[],"recomp":[["0x4014ba","push edx"],["0x4014bb","call <OFFSET12>"],["0x4014c0","pop edi"],["0x4014c1","pop esi"],["0x4014c2","pop ebp"],["0x4014c3","pop ebx"],["0x4014c4","add esp, 0x110 \t(FileBuffer.cpp:161)"],["0x4014ca","ret 8"],["0x4014cd","lea eax, [esp + 0x10] \t(FileBuffer.cpp:111)"],["0x4014d1","push 8"],["0x4014d3","push eax"],["0x4014d4","push esi"],["0x4014d5","call <OFFSET13>"],["0x4014da","cmp eax, 8 \t(FileBuffer.cpp:112)"],["0x4014dd","jne 0x4f"],["0x4014df","cmp byte ptr [esp + 0x10], 0x43"],["0x4014e4","jne 0x48"],["0x4014e6","cmp byte ptr [esp + 0x11], 0x4d"],["0x4014eb","jne 0x41"],["0x4014ed","cmp byte ptr [esp + 0x12], 0x50"],["0x4014f2","jne 0x3a"],["0x4014f4","cmp byte ptr [esp + 0x13], 0x52"],["0x4014f9","jne 0x33"],["0x4014fb","mov eax, dword ptr [esp + 0x14] \t(FileBuffer.cpp:114)"],["0x4014ff","cmp eax, -1"],["0x401502","jne 0xf"],["0x401504","pop edi"],["0x401505","pop esi"],["0x401506","pop ebp"],["0x401507","xor eax, eax \t(FileBuffer.cpp:115)"],["0x401509","pop ebx"],["0x40150a","add esp, 0x110 \t(FileBuffer.cpp:161)"],["0x401510","ret 8"],["0x401513","push eax \t(FileBuffer.cpp:117)"],["0x401514","call <OFFSET14>"],["0x401519","mov ebp, eax"],["0x40151b","mov eax, dword ptr [esp + 0x14] \t(FileBuffer.cpp:118)"],["0x40151f","push eax \t(FileBuffer.cpp:119)"]]},{"both":[["0x4aa405","push ebp","0x401520"]]},{"orig":[["0x4aa406","call CFileBuffer::GetGenericFileBuffer (FUNCTION)"]],"recomp":[["0x401521","push esi"],["0x401522","mov dword ptr [CGenericFileLoader::m_unk0x00663fe8 (DATA)], eax"],["0x401527","call <OFFSET13>"],["0x40152c","mov bl, 1 \t(FileBuffer.cpp:120)"],["0x40152e","push esi \t(FileBuffer.cpp:123)"],["0x40152f","call <OFFSET16>"],["0x401534","test bl, bl \t(FileBuffer.cpp:125)"],["0x401536","jne 0xe6"]]},{"both":[["0x4aa40b","push 0 \t(FileBuffer.cpp:127)","0x40153c"]]},{"orig":[["0x4aa40d","push ebx"]],"recomp":[["0x40153e","push 0x80"],["0x401543","push 3"],["0x401545","push 0"],["0x401547","push 1"],["0x401549","lea ecx, [esp + 0x30]"],["0x40154d","push 0x80000000"],["0x401552","push ecx"],["0x401553","call dword ptr [->KERNEL32.dll::CreateFileA (IMPORT)]"],["0x401559","mov edi, eax"],["0x40155b","cmp edi, -1 \t(FileBuffer.cpp:128)"],["0x40155e","jne 0x69"],["0x401560","mov eax, dword ptr [g_pGraphics (DATA)] \t(FileBuffer.cpp:130)"],["0x401565","test eax, eax"],["0x401567","je 0x12"],["0x401569","mov eax, dword ptr [eax + 0x3b8]"],["0x40156f","test eax, eax"],["0x401571","je 0x8"],["0x401573","mov eax, dword ptr [eax] \t(FileBuffer.cpp:131)"],["0x401575","push eax"],["0x401576","mov edx, dword ptr [eax]"],["0x401578","call dword ptr [edx + 0x28]"],["0x40157b","lea eax, [esp + 0x1c] \t(FileBuffer.cpp:133)"],["0x40157f","push eax"],["0x401580","call dword ptr [->KERNEL32.dll::GetFileAttributesA (IMPORT)]"],["0x401586","cmp eax, -1 \t(FileBuffer.cpp:134)"],["0x401589","jne 0xf"],["0x40158b","pop edi"],["0x40158c","pop esi"],["0x40158d","pop ebp"],["0x40158e","xor eax, eax \t(FileBuffer.cpp:135)"],["0x401590","pop ebx"],["0x401591","add esp, 0x110 \t(FileBuffer.cpp:161)"],["0x401597","ret 8"],["0x40159a","mov eax, dword ptr [CFileBuffer::m_unk0x00664620 (DATA)] \t(FileBuffer.cpp:140)"],["0x40159f","inc eax"],["0x4015a0","cmp eax, 0x32"],["0x4015a3","mov dword ptr [CFileBuffer::m_unk0x00664620 (DATA)], eax"],["0x4015a8","jge 0x62"],["0x4015aa","mov ecx, dword ptr [esp + 0x128] \t(FileBuffer.cpp:141)"],["0x4015b1","lea edx, [esp + 0x1c]"],["0x4015b5","push ecx"],["0x4015b6","push edx"],["0x4015b7","call <OFFSET12>"],["0x4015bc","pop edi"],["0x4015bd","pop esi"],["0x4015be","pop ebp"],["0x4015bf","pop ebx"],["0x4015c0","add esp, 0x110 \t(FileBuffer.cpp:161)"],["0x4015c6","ret 8"],["0x4015c9","push 0 \t(FileBuffer.cpp:146)"],["0x4015cb","push edi"]]},{"both":[["0x4aa40e","call dword ptr [->KERNEL32.dll::GetFileSize (IMPORT)]","0x4015cc"],["0x4aa414","mov esi, eax","0x4015d2"],["0x4aa416","cmp esi, -1 \t(FileBuffer.cpp:149)","0x4015d4"],["0x4aa419","mov dword ptr [CGenericFileLoader::m_unk0x00663fe8 (DATA)], esi","0x4015d7"],["0x4aa41f","jne 0xf","0x4015dd"],["0x4aa421","pop edi","0x4015df"],["0x4aa422","pop esi","0x4015e0"],["0x4aa423","pop ebp","0x4015e1"],["0x4aa424","xor eax, eax \t(FileBuffer.cpp:150)","0x4015e2"],["0x4aa426","pop ebx","0x4015e4"],["0x4aa427","add esp, 0x110 \t(FileBuffer.cpp:161)","0x4015e5"],["0x4aa42d","ret 8","0x4015eb"],["0x4aa430","push esi \t(FileBuffer.cpp:152)","0x4015ee"]]},{"orig":[["0x4aa431","call CFileBuffer::AllocateLockedBuffer (FUNCTION)"],["0x4aa436","lea edx, [esp + 0x18]"]],"recomp":[["0x4015ef","call <OFFSET14>"],["0x4015f4","mov ebp, eax"],["0x4015f6","lea eax, [esp + 0x18] \t(FileBuffer.cpp:153)"]]},{"both":[["0x4aa43a","push 0","0x4015fa"]]},{"orig":[["0x4aa43c","mov edi, eax"],["0x4aa43e","push edx"]],"recomp":[["0x4015fc","push eax"]]},{"both":[["0x4aa43f","push esi","0x4015fd"]]},{"orig":[],"recomp":[["0x4015fe","push ebp"]]},{"both":[["0x4aa440","push edi","0x4015ff"]]},{"orig":[["0x4aa441","push ebx"]],"recomp":[]},{"both":[["0x4aa442","call dword ptr [->KERNEL32.dll::ReadFile (IMPORT)]","0x401600"],["0x4aa448","cmp dword ptr [esp + 0x18], esi \t(FileBuffer.cpp:154)","0x401606"],["0x4aa44c","je 0xf","0x40160a"],["0x4aa44e","pop edi","0x40160c"],["0x4aa44f","pop esi","0x40160d"],["0x4aa450","pop ebp","0x40160e"],["0x4aa451","xor eax, eax \t(FileBuffer.cpp:155)","0x40160f"],["0x4aa453","pop ebx","0x401611"],["0x4aa454","add esp, 0x110 \t(FileBuffer.cpp:161)","0x401612"],["0x4aa45a","ret 8","0x401618"]]},{"orig":[["0x4aa45d","push ebx"]],"recomp":[["0x40161b","push edi \t(FileBuffer.cpp:157)"]]},{"both":[["0x4aa45e","call dword ptr [->KERNEL32.dll::CloseHandle (IMPORT)]","0x40161c"]]},{"orig":[["0x4aa464","mov eax, edi"]],"recomp":[]},{"both":[["0x4aa466","pop edi","0x401622"]]},{"orig":[],"recomp":[["0x401623","mov eax, ebp \t(FileBuffer.cpp:160)"]]},{"both":[["0x4aa467","pop esi","0x401625"],["0x4aa468","pop ebp","0x401626"],["0x4aa469","pop ebx","0x401627"],["0x4aa46a","add esp, 0x110 \t(FileBuffer.cpp:161)","0x401628"],["0x4aa470","ret 8","0x40162e"]]},{"orig":[["0x4aa473","nop "],["0x4aa474","nop "],["0x4aa475","nop "],["0x4aa476","nop "],["0x4aa477","nop "],["0x4aa478","nop "],["0x4aa479","nop "],["0x4aa47a","nop "],["0x4aa47b","nop "],["0x4aa47c","nop "],["0x4aa47d","nop "],["0x4aa47e","nop "],["0x4aa47f","nop "]],"recomp":[]}]]]},{"address":"0x4aa480","name":"CInstallInfo::ShowNoCDErrorMessage","matching":0.7225806451612903,"recomp":"0x401cd0","diff":[["@@ -0x4aa480,75 +0x401cd0,80 @@",[{"orig":[["0x4aa480","push ecx"]],"recomp":[]},{"both":[["0x4aa481","push esi \t(InstallInfo.cpp:61)","0x401cd0"]]},{"orig":[],"recomp":[["0x401cd1","push edi"]]},{"both":[["0x4aa482","push CInstallInfo::m_regKeyLanguage[0] (DATA)","0x401cd2"]]},{"orig":[["0x4aa487","call CInstallInfo::GetRegKeyValue (FUNCTION)"]],"recomp":[["0x401cd7","call <OFFSET2>"],["0x401cdc","mov edi, dword ptr [MSVCRT.dll::_stricmp (IMPORT)] \t(InstallInfo.cpp:66)"]]},{"both":[["0x4aa48c","mov esi, eax","0x401ce2"],["0x4aa48e","push CInstallInfo::m_regKeyValueEnglish[0] (DATA)","0x401ce4"],["0x4aa493","push esi","0x401ce9"]]},{"orig":[["0x4aa494","call <OFFSET4>"]],"recomp":[["0x401cea","call edi"]]},{"both":[["0x4aa499","add esp, 8","0x401cec"],["0x4aa49c","test eax, eax \t(InstallInfo.cpp:67)","0x401cef"]]},{"orig":[["0x4aa49e","je 0x98"]],"recomp":[["0x401cf1","je 0x86"]]},{"both":[["0x4aa4a4","push CInstallInfo::m_regKeyValueFrench[0] (DATA) \t(InstallInfo.cpp:69)","0x401cf7"],["0x4aa4a9","push esi","0x401cfc"]]},{"orig":[["0x4aa4aa","call <OFFSET4>"]],"recomp":[["0x401cfd","call edi"]]},{"both":[["0x4aa4af","add esp, 8","0x401cff"],["0x4aa4b2","test eax, eax","0x401d02"],["0x4aa4b4","jne 0x7","0x401d04"],["0x4aa4b6","mov eax, 4 \t(InstallInfo.cpp:70)","0x401d06"]]},{"orig":[["0x4aa4bb","jmp 0x7f"]],"recomp":[["0x401d0b","jmp 0x70 \t(InstallInfo.cpp:71)"]]},{"both":[["0x4aa4bd","push CInstallInfo::m_regKeyValueGerman[0] (DATA) \t(InstallInfo.cpp:73)","0x401d0d"],["0x4aa4c2","push esi","0x401d12"]]},{"orig":[["0x4aa4c3","call <OFFSET4>"]],"recomp":[["0x401d13","call edi"]]},{"both":[["0x4aa4c8","add esp, 8","0x401d15"],["0x4aa4cb","test eax, eax","0x401d18"],["0x4aa4cd","jne 0x7","0x401d1a"],["0x4aa4cf","mov eax, 1 \t(InstallInfo.cpp:74)","0x401d1c"]]},{"orig":[["0x4aa4d4","jmp 0x66"]],"recomp":[["0x401d21","jmp 0x5a \t(InstallInfo.cpp:75)"]]},{"both":[["0x4aa4d6","push CInstallInfo::m_regKeyValueItalian[0] (DATA) \t(InstallInfo.cpp:77)","0x401d23"],["0x4aa4db","push esi","0x401d28"]]},{"orig":[["0x4aa4dc","call <OFFSET4>"]],"recomp":[["0x401d29","call edi"]]},{"both":[["0x4aa4e1","add esp, 8","0x401d2b"],["0x4aa4e4","test eax, eax","0x401d2e"],["0x4aa4e6","jne 0x7","0x401d30"],["0x4aa4e8","mov eax, 2 \t(InstallInfo.cpp:78)","0x401d32"]]},{"orig":[["0x4aa4ed","jmp 0x4d"]],"recomp":[["0x401d37","jmp 0x44 \t(InstallInfo.cpp:79)"]]},{"both":[["0x4aa4ef","push CInstallInfo::m_regKeyValueSpanish[0] (DATA) \t(InstallInfo.cpp:81)","0x401d39"],["0x4aa4f4","push esi","0x401d3e"]]},{"orig":[["0x4aa4f5","call <OFFSET4>"]],"recomp":[["0x401d3f","call edi"]]},{"both":[["0x4aa4fa","add esp, 8","0x401d41"],["0x4aa4fd","test eax, eax","0x401d44"],["0x4aa4ff","jne 0x7","0x401d46"],["0x4aa501","mov eax, 3 \t(InstallInfo.cpp:82)","0x401d48"]]},{"orig":[["0x4aa506","jmp 0x34"]],"recomp":[["0x401d4d","jmp 0x2e \t(InstallInfo.cpp:83)"]]},{"both":[["0x4aa508","push CInstallInfo::m_regKeyValuePolish[0] (DATA) \t(InstallInfo.cpp:85)","0x401d4f"],["0x4aa50d","push esi","0x401d54"]]},{"orig":[["0x4aa50e","call <OFFSET4>"]],"recomp":[["0x401d55","call edi"]]},{"both":[["0x4aa513","add esp, 8","0x401d57"],["0x4aa516","test eax, eax","0x401d5a"],["0x4aa518","jne 0x7","0x401d5c"],["0x4aa51a","mov eax, 5 \t(InstallInfo.cpp:86)","0x401d5e"]]},{"orig":[["0x4aa51f","jmp 0x1b"]],"recomp":[["0x401d63","jmp 0x18 \t(InstallInfo.cpp:87)"]]},{"both":[["0x4aa521","push CInstallInfo::m_regKeyValueAmerican[0] (DATA) \t(InstallInfo.cpp:89)","0x401d65"],["0x4aa526","push esi","0x401d6a"]]},{"orig":[["0x4aa527","call <OFFSET4>"]],"recomp":[["0x401d6b","call edi"]]},{"both":[["0x4aa52c","add esp, 8","0x401d6d"],["0x4aa52f","test eax, eax","0x401d70"],["0x4aa531","mov eax, 6 \t(InstallInfo.cpp:90)","0x401d72"],["0x4aa536","je 0x4","0x401d77"]]},{"orig":[["0x4aa538","mov eax, dword ptr [esp + 4]"]],"recomp":[["0x401d79","mov eax, dword ptr [esp + 0xc] \t(InstallInfo.cpp:92)"]]},{"both":[["0x4aa53c","mov ecx, dword ptr [eax*8 + CInstallInfo::m_noCDMessages[0].[1] (UNK)] \t(InstallInfo.cpp:100)","0x401d7d"],["0x4aa543","mov edx, dword ptr [eax*8 + CInstallInfo::m_noCDMessages[0].[0] (DATA)]","0x401d84"],["0x4aa54a","mov eax, dword ptr [CMain::m_hWndIx (DATA)]","0x401d8b"],["0x4aa54f","push 5","0x401d90"],["0x4aa551","push ecx","0x401d92"],["0x4aa552","push edx","0x401d93"],["0x4aa553","mov ecx, dword ptr [eax*4 + CMain::m_hWndList[0] (DATA)]","0x401d94"],["0x4aa55a","push ecx","0x401d9b"],["0x4aa55b","call dword ptr [->USER32.dll::MessageBoxA (IMPORT)]","0x401d9c"]]},{"orig":[],"recomp":[["0x401da2","pop edi"]]},{"both":[["0x4aa561","cmp eax, 2","0x401da3"],["0x4aa564","pop esi","0x401da6"]]},{"orig":[["0x4aa565","jne 0x1b"],["0x4aa567","call CMain::FUN_0049c130 (FUNCTION)"],["0x4aa56c","call CLogger::CloseLogFile (FUNCTION)"]],"recomp":[["0x401da7","jne 0x17"],["0x401da9","call <OFFSET16> \t(InstallInfo.cpp:102)"],["0x401dae","call <OFFSET17> \t(InstallInfo.cpp:103)"]]},{"both":[["0x4aa571","mov edx, dword ptr [CMain::m_unk0x00663c70 (DATA)] \t(InstallInfo.cpp:104)","0x401db3"],["0x4aa577","push edx","0x401db9"]]},{"orig":[],"recomp":[["0x401dba","call dword ptr [->KERNEL32.dll::ExitProcess (IMPORT)]"],["0x401dc0","mov eax, 1 \t(InstallInfo.cpp:107)"],["0x401dc5","ret 4 \t(InstallInfo.cpp:108)"]]}]]]},{"address":"0x4aa590","name":"CGenericFileLoader::GetGenericFileSize","matching":1.0,"recomp":"0x401c50"},{"address":"0x4aa720","name":"CInstallInfo::GetRegKeyValue","matching":0.0,"recomp":"0x401c70","stub":true},{"address":"0x4aad70","name":"CFileBuffer::AllocateLockedBuffer","matching":1.0,"recomp":"0x401320"},{"address":"0x4aad90","name":"CFileBuffer::ReallocateLockedBuffer","matching":0.9629629629629629,"recomp":"0x401350","diff":[["@@ -0x4aadb2,13 +0x401372,13 @@",[{"both":[["0x4aadb2","call edi","0x401372"],["0x4aadb4","push eax","0x401374"],["0x4aadb5","call dword ptr [->KERNEL32.dll::GlobalReAlloc (IMPORT)]","0x401375"],["0x4aadbb","push eax \t(FileBuffer.cpp:42)","0x40137b"],["0x4aadbc","call dword ptr [->KERNEL32.dll::GlobalLock (IMPORT)]","0x40137c"],["0x4aadc2","pop edi","0x401382"],["0x4aadc3","pop esi","0x401383"],["0x4aadc4","ret 8 \t(FileBuffer.cpp:47)","0x401384"],["0x4aadc7","mov ecx, dword ptr [esp + 0xc] \t(FileBuffer.cpp:45)","0x401387"],["0x4aadcb","push ecx","0x40138b"]]},{"orig":[["0x4aadcc","call CFileBuffer::AllocateLockedBuffer (FUNCTION)"]],"recomp":[["0x40138c","call <OFFSET5>"]]},{"both":[["0x4aadd1","pop esi","0x401391"],["0x4aadd2","ret 8 \t(FileBuffer.cpp:47)","0x401392"]]}]]]},{"address":"0x4aade0","name":"CFileBuffer::FreeGenericFileBuffer","matching":1.0,"recomp":"0x401720"},{"address":"0x4ab620","name":"CLogger::OpenLogFile","matching":1.0,"recomp":"0x401e10"},{"address":"0x4ab670","name":"CLogger::LogToFile","matching":1.0,"recomp":"0x401e80"},{"address":"0x4ab6f0","name":"CLogger::CloseLogFile","matching":1.0,"recomp":"0x401f20"},{"address":"0x4b7560","name":"CFrontend::FUN_004b7560","matching":1.0,"recomp":"0x401970","effective":true,"diff":[["@@ -0x4b7560,10 +0x401970,10 @@",[{"both":[["0x4b7560","mov eax, dword ptr [esp + 4] \t(Frontend.cpp:108)","0x401970"],["0x4b7564","mov ecx, dword ptr [CFrontend::m_unk0x006e0c5c (DATA)]","0x401974"]]},{"orig":[["0x4b756a","cmp eax, ecx"],["0x4b756c","jb 0x10"]],"recomp":[["0x40197a","cmp ecx, eax"],["0x40197c","ja 0x10"]]},{"both":[["0x4b756e","cmp eax, dword ptr [CFrontend::m_unk0x006e0c64 (DATA)]","0x40197e"],["0x4b7574","ja 0x8","0x401984"],["0x4b7576","mov eax, 1 \t(Frontend.cpp:110)","0x401986"],["0x4b757b","ret 4 \t(Frontend.cpp:113)","0x40198b"],["0x4b757e","xor eax, eax \t(Frontend.cpp:112)","0x40198e"],["0x4b7580","ret 4 \t(Frontend.cpp:113)","0x401990"]]}]]]},{"address":"0x4b7590","name":"CFrontend::FUN_004b7590","matching":1.0,"recomp":"0x4019b0","effective":true,"diff":[["@@ -0x4b7590,10 +0x4019b0,10 @@",[{"both":[["0x4b7590","mov eax, dword ptr [esp + 4] \t(Frontend.cpp:117)","0x4019b0"],["0x4b7594","mov ecx, dword ptr [CFrontend::m_unk0x006e0c60 (DATA)]","0x4019b4"]]},{"orig":[["0x4b759a","cmp eax, ecx"],["0x4b759c","jb 0x10"]],"recomp":[["0x4019ba","cmp ecx, eax"],["0x4019bc","ja 0x10"]]},{"both":[["0x4b759e","cmp eax, dword ptr [CFrontend::m_unk0x006e0c68 (DATA)]","0x4019be"],["0x4b75a4","ja 0x8","0x4019c4"],["0x4b75a6","mov eax, 1 \t(Frontend.cpp:119)","0x4019c6"],["0x4b75ab","ret 4 \t(Frontend.cpp:122)","0x4019cb"],["0x4b75ae","xor eax, eax \t(Frontend.cpp:121)","0x4019ce"],["0x4b75b0","ret 4 \t(Frontend.cpp:122)","0x4019d0"]]}]]]},{"address":"0x4bdee0","name":"CFileBuffer::FUN_004bdee0","matching":0.0,"recomp":"0x4016e0","stub":true},{"address":"0x4be660","name":"CFileBuffer::FUN_004be660","matching":0.0,"recomp":"0x401700","stub":true},{"address":"0x4d21e0","name":"CFrontend::FUN_004d21e0","matching":0.5968992248062015,"recomp":"0x401760","diff":[["@@ -0x4d21e0,131 +0x401760,127 @@",[{"both":[["0x4d21e0","mov eax, dword ptr [CGenericFileLoader::m_genericFile (DATA)] \t(Frontend.cpp:29)","0x401760"],["0x4d21e5","push ebx","0x401765"],["0x4d21e6","push esi","0x401766"]]},{"orig":[["0x4d21e7","xor esi, esi"],["0x4d21e9","cmp eax, esi"]],"recomp":[["0x401767","push edi"],["0x401768","xor edi, edi"],["0x40176a","cmp eax, edi"]]},{"both":[["0x4d21eb","je 0xc","0x40176c"],["0x4d21ed","push eax \t(Frontend.cpp:35)","0x40176e"]]},{"orig":[["0x4d21ee","call CFileBuffer::FreeGenericFileBuffer (FUNCTION)"],["0x4d21f3","mov dword ptr [CGenericFileLoader::m_genericFile (DATA)], esi"],["0x4d21f9","mov dword ptr [CGenericFileLoader::m_genericFile+8 (OFFSET)], esi"],["0x4d21ff","mov dword ptr [CGenericFileLoader::m_genericFile+4 (OFFSET)], esi"],["0x4d2205","call CGameInfo::GetScreenWidth (FUNCTION)"]],"recomp":[["0x40176f","call <OFFSET2>"],["0x401774","mov dword ptr [CGenericFileLoader::m_genericFile (DATA)], edi \t(Frontend.cpp:36)"],["0x40177a","mov dword ptr [CGenericFileLoader::m_genericFile+8 (OFFSET)], edi \t(Frontend.cpp:39)"],["0x401780","mov dword ptr [CGenericFileLoader::m_genericFile+4 (OFFSET)], edi \t(Frontend.cpp:40)"],["0x401786","call <OFFSET5> \t(Frontend.cpp:42)"],["0x40178b","mov esi, dword ptr [MSVCRT.dll::sprintf (IMPORT)]"]]},{"both":[["0x4d220a","cmp eax, 0x400","0x401791"],["0x4d220f","jb 0x3f","0x401796"],["0x4d2211","push 0x400 \t(Frontend.cpp:44)","0x401798"]]},{"orig":[["0x4d2216","call CFrontend::FUN_004b7560 (FUNCTION)"]],"recomp":[["0x40179d","call <OFFSET7>"]]},{"both":[["0x4d221b","test eax, eax","0x4017a2"]]},{"orig":[["0x4d221d","je 0x31"]],"recomp":[["0x4017a4","je 0x5c"]]},{"both":[["0x4d221f","push 0x400 \t(Frontend.cpp:46)","0x4017a6"]]},{"orig":[["0x4d2224","call CFrontend::FUN_004b7590 (FUNCTION)"]],"recomp":[["0x4017ab","call <OFFSET8>"]]},{"both":[["0x4d2229","test eax, eax","0x4017b0"]]},{"orig":[["0x4d222b","je 0x23"],["0x4d222d","call CFrontend::FUN_004a9700 (FUNCTION)"]],"recomp":[["0x4017b2","je 0x4e"],["0x4017b4","call <OFFSET9> \t(Frontend.cpp:48)"]]},{"both":[["0x4d2232","test eax, eax","0x4017b9"],["0x4d2234","je 0xd","0x4017bb"]]},{"orig":[["0x4d2236","call CInstallInfo::GetFrontendDir (FUNCTION)"]],"recomp":[["0x4017bd","call <OFFSET10> \t(Frontend.cpp:49)"]]},{"both":[["0x4d223b","push eax","0x4017c2"],["0x4d223c","push CFrontend::m_feRes1024C[0] (DATA)","0x4017c3"],["0x4d2241","jmp 0x2e \t(Frontend.cpp:51)","0x4017c8"]]},{"orig":[["0x4d2243","call CInstallInfo::GetFrontendDir (FUNCTION)"]],"recomp":[["0x4017ca","call <OFFSET10> \t(Frontend.cpp:52)"]]},{"both":[["0x4d2248","push eax","0x4017cf"],["0x4d2249","push CFrontend::m_feRes1024[0] (DATA)","0x4017d0"],["0x4d224e","jmp 0x21 \t(Frontend.cpp:56)","0x4017d5"]]},{"orig":[["0x4d2250","call CFrontend::FUN_004a9700 (FUNCTION)"]],"recomp":[["0x4017d7","call <OFFSET9> \t(Frontend.cpp:59)"]]},{"both":[["0x4d2255","test eax, eax","0x4017dc"],["0x4d2257","je 0xd","0x4017de"]]},{"orig":[["0x4d2259","call CInstallInfo::GetFrontendDir (FUNCTION)"]],"recomp":[["0x4017e0","call <OFFSET10> \t(Frontend.cpp:60)"]]},{"both":[["0x4d225e","push eax","0x4017e5"],["0x4d225f","push CFrontend::m_feRes640C[0] (DATA)","0x4017e6"],["0x4d2264","jmp 0xb \t(Frontend.cpp:61)","0x4017eb"]]},{"orig":[["0x4d2266","call CInstallInfo::GetFrontendDir (FUNCTION)"]],"recomp":[["0x4017ed","call <OFFSET10> \t(Frontend.cpp:62)"]]},{"both":[["0x4d226b","push eax","0x4017f2"],["0x4d226c","push CFrontend::m_feRes640[0] (DATA)","0x4017f3"],["0x4d2271","push CFrontend::m_stringDest[0] (DATA)","0x4017f8"]]},{"orig":[["0x4d2276","call <OFFSET15>"]],"recomp":[["0x4017fd","call esi"]]},{"both":[["0x4d227b","add esp, 0xc","0x4017ff"],["0x4d227e","push CFrontend::m_stringDest[0] (DATA) \t(Frontend.cpp:65)","0x401802"],["0x4d2283","push CGenericFileLoader::m_genericFile (DATA)","0x401807"]]},{"orig":[["0x4d2288","call CGenericFileLoader::FUN_004a9d70 (FUNCTION)"]],"recomp":[["0x40180c","call <OFFSET16>"]]},{"both":[["0x4d228d","mov eax, dword ptr [CFrontend::m_unk0x00818260 (DATA)] \t(Frontend.cpp:66)","0x401811"]]},{"orig":[["0x4d2292","cmp eax, esi"]],"recomp":[["0x401816","cmp eax, edi"]]},{"both":[["0x4d2294","je 0xc","0x401818"],["0x4d2296","push eax \t(Frontend.cpp:68)","0x40181a"]]},{"orig":[["0x4d2297","call CFileBuffer::FreeGenericFileBuffer (FUNCTION)"],["0x4d229c","mov dword ptr [CFrontend::m_unk0x00818260 (DATA)], esi"],["0x4d22a2","mov dword ptr [CFrontend::m_unk0x00818260+8 (OFFSET)], esi"],["0x4d22a8","mov dword ptr [CFrontend::m_unk0x00818260+4 (OFFSET)], esi"],["0x4d22ae","call CGameInfo::GetGameRegion (FUNCTION)"],["0x4d22b3","sub eax, esi"],["0x4d22b5","je 0x8"]],"recomp":[["0x40181b","call <OFFSET2>"],["0x401820","mov dword ptr [CFrontend::m_unk0x00818260 (DATA)], edi \t(Frontend.cpp:69)"],["0x401826","mov dword ptr [CFrontend::m_unk0x00818260+8 (OFFSET)], edi \t(Frontend.cpp:71)"],["0x40182c","mov dword ptr [CFrontend::m_unk0x00818260+4 (OFFSET)], edi \t(Frontend.cpp:72)"],["0x401832","call <OFFSET20> \t(Frontend.cpp:76)"],["0x401837","cmp eax, edi \t(Frontend.cpp:77)"],["0x401839","je 0xa"]]},{"both":[["0x4d22b7","dec eax","0x40183b"]]},{"orig":[["0x4d22b8","je 0x5"]],"recomp":[["0x40183c","je 0x7"]]},{"both":[["0x4d22ba","dec eax","0x40183e"],["0x4d22bb","mov bl, 0x50 \t(Frontend.cpp:78)","0x40183f"]]},{"orig":[],"recomp":[["0x401841","test eax, eax"]]},{"both":[["0x4d22bd","jne 0x2","0x401843"],["0x4d22bf","mov bl, 0x45 \t(Frontend.cpp:80)","0x401845"]]},{"orig":[["0x4d22c1","call CGameInfo::GetScreenWidth (FUNCTION)"]],"recomp":[["0x401847","call <OFFSET5> \t(Frontend.cpp:82)"]]},{"both":[["0x4d22c6","cmp eax, 0x400","0x40184c"]]},{"orig":[["0x4d22cb","jb 0x53"]],"recomp":[["0x401851","jb 0x57"]]},{"both":[["0x4d22cd","push 0x400 \t(Frontend.cpp:84)","0x401853"]]},{"orig":[["0x4d22d2","call CFrontend::FUN_004b7560 (FUNCTION)"]],"recomp":[["0x401858","call <OFFSET7>"]]},{"both":[["0x4d22d7","test eax, eax","0x40185d"]]},{"orig":[["0x4d22d9","je 0x45"]],"recomp":[["0x40185f","je 0x84"]]},{"both":[["0x4d22db","push 0x400 \t(Frontend.cpp:86)","0x401865"]]},{"orig":[["0x4d22e0","call CFrontend::FUN_004b7590 (FUNCTION)"]],"recomp":[["0x40186a","call <OFFSET8>"]]},{"both":[["0x4d22e5","test eax, eax","0x40186f"]]},{"orig":[["0x4d22e7","je 0x37"],["0x4d22e9","call CFrontend::FUN_004a9700 (FUNCTION)"]],"recomp":[["0x401871","je 0x76"],["0x401873","call <OFFSET9> \t(Frontend.cpp:88)"]]},{"both":[["0x4d22ee","test eax, eax","0x401878"],["0x4d22f0","je 0x17","0x40187a"],["0x4d22f2","movsx eax, bl \t(Frontend.cpp:89)","0x40187c"],["0x4d22f5","push eax","0x40187f"]]},{"orig":[["0x4d22f6","call CGameInfo::GetGameRegionDirectory (FUNCTION)"]],"recomp":[["0x401880","call <OFFSET21>"]]},{"both":[["0x4d22fb","push eax","0x401885"]]},{"orig":[["0x4d22fc","call CInstallInfo::GetCountrySpecificDir (FUNCTION)"]],"recomp":[["0x401886","call <OFFSET22>"]]},{"both":[["0x4d2301","push eax","0x40188b"],["0x4d2302","push CFrontend::m_feRes1024CCountrySpecific[0] (DATA)","0x40188c"],["0x4d2307","jmp 0x4c \t(Frontend.cpp:90)","0x401891"],["0x4d2309","movsx ecx, bl \t(Frontend.cpp:91)","0x401893"],["0x4d230c","push ecx","0x401896"]]},{"orig":[["0x4d230d","call CGameInfo::GetGameRegionDirectory (FUNCTION)"]],"recomp":[["0x401897","call <OFFSET21>"]]},{"both":[["0x4d2312","push eax","0x40189c"]]},{"orig":[["0x4d2313","call CInstallInfo::GetCountrySpecificDir (FUNCTION)"]],"recomp":[["0x40189d","call <OFFSET22>"]]},{"both":[["0x4d2318","push eax","0x4018a2"],["0x4d2319","push CFrontend::m_feRes1024CountrySpecific[0] (DATA)","0x4018a3"],["0x4d231e","jmp 0x35 \t(Frontend.cpp:95)","0x4018a8"]]},{"orig":[["0x4d2320","call CFrontend::FUN_004a9700 (FUNCTION)"]],"recomp":[["0x4018aa","call <OFFSET9> \t(Frontend.cpp:97)"]]},{"both":[["0x4d2325","test eax, eax","0x4018af"],["0x4d2327","je 0x17","0x4018b1"],["0x4d2329","movsx edx, bl \t(Frontend.cpp:98)","0x4018b3"],["0x4d232c","push edx","0x4018b6"]]},{"orig":[["0x4d232d","call CGameInfo::GetGameRegionDirectory (FUNCTION)"]],"recomp":[["0x4018b7","call <OFFSET21>"]]},{"both":[["0x4d2332","push eax","0x4018bc"]]},{"orig":[["0x4d2333","call CInstallInfo::GetCountrySpecificDir (FUNCTION)"]],"recomp":[["0x4018bd","call <OFFSET22>"]]},{"both":[["0x4d2338","push eax","0x4018c2"],["0x4d2339","push CFrontend::m_feRes640CCountrySpecific[0] (DATA)","0x4018c3"],["0x4d233e","jmp 0x15 \t(Frontend.cpp:99)","0x4018c8"],["0x4d2340","movsx eax, bl \t(Frontend.cpp:100)","0x4018ca"],["0x4d2343","push eax","0x4018cd"]]},{"orig":[["0x4d2344","call CGameInfo::GetGameRegionDirectory (FUNCTION)"]],"recomp":[["0x4018ce","call <OFFSET21>"]]},{"both":[["0x4d2349","push eax","0x4018d3"]]},{"orig":[["0x4d234a","call CInstallInfo::GetCountrySpecificDir (FUNCTION)"]],"recomp":[["0x4018d4","call <OFFSET22>"]]},{"both":[["0x4d234f","push eax","0x4018d9"],["0x4d2350","push CFrontend::m_feRes640CountrySpecific[0] (DATA)","0x4018da"],["0x4d2355","push CFrontend::m_stringDest[0] (DATA)","0x4018df"]]},{"orig":[["0x4d235a","call <OFFSET15>"]],"recomp":[["0x4018e4","call esi"]]},{"both":[["0x4d235f","add esp, 0x14","0x4018e6"],["0x4d2362","push CFrontend::m_stringDest[0] (DATA) \t(Frontend.cpp:103)","0x4018e9"],["0x4d2367","push CFrontend::m_unk0x00818260 (DATA)","0x4018ee"]]},{"orig":[["0x4d236c","call CGenericFileLoader::FUN_004a9d70 (FUNCTION)"]],"recomp":[["0x4018f3","call <OFFSET16>"],["0x4018f8","pop edi"]]},{"both":[["0x4d2371","pop esi","0x4018f9"],["0x4d2372","pop ebx","0x4018fa"],["0x4d2373","ret  \t(Frontend.cpp:104)","0x4018fb"]]},{"orig":[["0x4d2374","nop "],["0x4d2375","nop "],["0x4d2376","nop "],["0x4d2377","nop "],["0x4d2378","nop "],["0x4d2379","nop "],["0x4d237a","nop "],["0x4d237b","nop "]],"recomp":[]}]]]},{"address":"0x4de170","name":"FormatCentisecondsAsMinSecMSec","matching":0.9538461538461539,"recomp":"0x4025c0","diff":[["@@ -0x4de1a0,15 +0x4025f0,14 @@",[{"both":[["0x4de1a0","push edx","0x4025f0"],["0x4de1a1","imul ecx","0x4025f1"],["0x4de1a3","sar edx, 7","0x4025f3"],["0x4de1a6","mov ecx, edx","0x4025f6"],["0x4de1a8","shr ecx, 0x1f","0x4025f8"],["0x4de1ab","add edx, ecx","0x4025fb"],["0x4de1ad","push edx","0x4025fd"],["0x4de1ae","mov edx, dword ptr [esp + 0x18]","0x4025fe"],["0x4de1b2","push \"%02d:%02d.%02d\" (STRING)","0x402602"],["0x4de1b7","push edx","0x402607"]]},{"orig":[["0x4de1b8","call <OFFSET2>"]],"recomp":[["0x402608","call dword ptr [->MSVCRT.dll::sprintf (IMPORT)]"]]},{"both":[["0x4de1bd","add esp, 0x14","0x40260e"],["0x4de1c0","pop esi","0x402611"],["0x4de1c1","ret 8 \t(TimingUtils.cpp:12)","0x402612"]]},{"orig":[["0x4de1c4","nop "]],"recomp":[]}]]]},{"address":"0x510570","name":"CGameInfo::FUN_00510570","matching":0.2,"recomp":"0x401b80","diff":[["@@ -0x510570,5 +0x401b80,5 @@",[{"orig":[["0x510570","mov dword ptr [<OFFSET1>], 0x18000"],["0x51057a","mov dword ptr [<OFFSET2>], 0x68000"],["0x510584","mov word ptr [<OFFSET3>], 0x2d"],["0x51058d","mov dword ptr [<OFFSET4>], 0xe0000"]],"recomp":[["0x401b80","mov dword ptr [CGameInfo::m_gameInfo+36 (OFFSET)], 0x18000 \t(GameInfo.cpp:84)"],["0x401b8a","mov dword ptr [CGameInfo::m_gameInfo+40 (OFFSET)], 0x68000 \t(GameInfo.cpp:86)"],["0x401b94","mov word ptr [CGameInfo::m_gameInfo+48 (OFFSET)], 0x2d \t(GameInfo.cpp:87)"],["0x401b9d","mov dword ptr [CGameInfo::m_gameInfo+44 (OFFSET)], 0xe0000 \t(GameInfo.cpp:88)"]]},{"both":[["0x510597","ret  \t(GameInfo.cpp:89)","0x401ba7"]]}]]]}]};
    </script>
    <script>/******************************************************************************/
// globals.js
const global_reccmp_data = window.global_reccmp_report.data;

// Unwrap array of functions into a dictionary with address as the key.
const dataDict = Object.fromEntries(global_reccmp_data.map((row) => [row.address, row]));

function getDataByAddr(addr) {
  return dataDict[addr];
}


/******************************************************************************/
// events.js

class ReccmpRegisterEvent extends CustomEvent {
  constructor(callback) {
    super('reccmp-register', { bubbles: true, detail: callback });
  }
}


/******************************************************************************/
// state.js

// Special internal values to ensure this sort order for matching column:
// 1. Stub
// 2. Any match percentage [0.0, 1.0)
// 3. Effective match
// 4. Actual 100% match
function getRowSortValue(row) {
  // Stubs appear at the bottom, below even a 0% match.
  if ('stub' in row) {
    return -1;
  }

  // An effective match sorts near the top
  // but under a non-effective match.
  if ('effective' in row) {
    return 1.0;
  }

  // Boost non-effective match so they appear at the top.
  if (row.matching === 1.0) {
    return 1000;
  }

  return row.matching;
}

function createSortFunction({ sortCol, sortDesc }) {
  return (rowA, rowB) => {
    const valA = sortCol === 'matching' ? getRowSortValue(rowA) : rowA[sortCol];
    const valB = sortCol === 'matching' ? getRowSortValue(rowB) : rowB[sortCol];

    if (valA > valB) {
      return sortDesc ? -1 : 1;
    } else if (valA < valB) {
      return sortDesc ? 1 : -1;
    }

    return 0;
  };
}

function createFilterFunction({ hidePerfect, hideStub, query, filterType }) {
  const queryNormalized = query.toLowerCase().trim();

  return (row) => {
    // Destructuring sets defaults for optional values from this object.
    const { effective = false, stub = false, diff = '', name, address, matching } = row;

    if (hidePerfect && (effective || matching >= 1)) {
      return false;
    }

    if (hideStub && stub) {
      return false;
    }

    if (queryNormalized === '') {
      return true;
    }

    // Name/addr search
    if (filterType === 1) {
      return address.includes(queryNormalized) || name.toLowerCase().includes(queryNormalized);
    }

    // no diff for review.
    if (diff === '') {
      return false;
    }

    // special matcher for combined diff
    const anyLineMatch = ([_addr, line]) => line.toLowerCase().trim().includes(queryNormalized);

    // Flatten all diff groups for the search
    const diffs = diff.flatMap(([_slug, subgroups]) => subgroups);
    for (const subgroup of diffs) {
      const { both = [], orig = [], recomp = [] } = subgroup;

      // If search includes context
      if (filterType === 2 && both.some(anyLineMatch)) {
        return true;
      }

      if (orig.some(anyLineMatch) || recomp.some(anyLineMatch)) {
        return true;
      }
    }

    return false;
  };
}

function batched(input, chunkSize) {
  function* gen(arr, n) {
    for (let i = 0; i < arr.length; i += n) {
      yield arr.slice(i, i + n);
    }
  }

  return [...gen(input, Math.max(1, chunkSize))];
}

class ReccmpState {
  constructor(dataset) {
    this.dataset = dataset;
    this.state = {
      // Filtered list of entities
      results: this.dataset,

      // results split into subarrays according to the pageSize.
      pages: [],

      // Sort column and direction
      sortCol: 'address',
      sortDesc: false,

      // Query text and which fields to search.
      query: '',
      filterType: 1,

      // Row filtering
      hidePerfect: false,
      hideStub: false,

      // Column hiding
      showRecomp: false,

      // Rows with detail row (keyed by address)
      expanded: {},

      // Paging. Numbers are 0-based. Display components add 1 to both for.
      currentPage: [],
      pageNumber: 0,
      maxPageNumber: 0,
      pageSize: 200,
    };

    // Populate fields with default search options.
    this.updateResults();
  }

  clampPage(desiredPage) {
    // Clamp desiredPage to (0, maxPageNumber] --> a page that actually exists.
    return Math.max(0, Math.min(desiredPage, this.state.maxPageNumber));
  }

  updateCurrentPage() {
    // Should be called whenever state.pageNumber changes.
    // If the current search filters yield no results, then there will be no pages
    // so don't try to index the pages array in that case.
    if (this.state.pages.length > 0) {
      this.state.currentPage = this.state.pages[this.state.pageNumber];
    } else {
      this.state.currentPage = [];
    }
  }

  updateResults() {
    const filterFn = createFilterFunction(this.state);
    const sortFn = createSortFunction(this.state);

    this.state.results = this.dataset.filter(filterFn).sort(sortFn);
    this.state.pages = batched(this.state.results, this.state.pageSize);
    this.state.maxPageNumber = Math.max(0, this.state.pages.length - 1);
    this.state.pageNumber = Math.min(this.state.pageNumber, this.state.maxPageNumber);
    this.updateCurrentPage();
  }

  setPageNumber(page) {
    this.state.pageNumber = this.clampPage(page);
    this.updateCurrentPage();
  }

  setFilterType(value) {
    // 1: Search by address or name.
    // 2: Search disassembly.
    // 3: Search disassembly, diff instructions only.
    const filterType = parseInt(value);
    if (filterType >= 1 && filterType <= 3) {
      this.state.filterType = filterType;
    }

    this.updateResults();
  }

  setQuery(query) {
    this.state.query = query;
    this.updateResults();
  }

  setShowRecomp(value) {
    this.state.showRecomp = value;

    // Don't sort by the recomp column we are about to hide
    if (!this.state.showRecomp && this.state.sortCol === 'recomp') {
      this.state.sortCol = 'address';
      // Re-sort using the address column (GH issue #195)
      this.updateResults();
    }
  }

  setSortCol(column) {
    // Flip sort direction if this is the current sort column.
    if (column === this.state.sortCol) {
      this.state.sortDesc = !this.state.sortDesc;
    } else {
      this.state.sortCol = column;
    }
    this.state.sortCol = column;
    this.updateResults();
  }

  setHidePerfect(value) {
    this.state.hidePerfect = value;
    this.updateResults();
  }

  setHideStub(value) {
    this.state.hideStub = value;
    this.updateResults();
  }

  setPageSize(value) {
    this.state.pageSize = parseInt(value);
    this.updateResults();
  }

  toggleExpanded(addr) {
    if (addr in this.state.expanded) {
      delete this.state.expanded[addr];
    } else {
      this.state.expanded[addr] = true;
    }
  }
}


/******************************************************************************/
// provider.js

class ReccmpProvider extends window.HTMLElement {
  constructor() {
    super();
    this.reccmp = new ReccmpState(global_reccmp_data);
    this.listeners = [];
    this.tables = [];

    this.addEventListener('reccmp-register', (evt) => {
      evt.stopImmediatePropagation();
      this.listeners.push(evt.detail);
      // Call the listener immediately after registering.
      // This populates the component with data.
      evt.detail(this.reccmp.state);
    });

    this.addEventListener('reccmp-table', (evt) => {
      evt.stopImmediatePropagation();
      this.tables.push(evt.detail);
    });

    this.addEventListener('setHidePerfect', (evt) => {
      this.reccmp.setHidePerfect(evt.detail);
      this.callListeners();
    });

    this.addEventListener('setHideStub', (evt) => {
      this.reccmp.setHideStub(evt.detail);
      this.callListeners();
    });

    this.addEventListener('setShowRecomp', (evt) => {
      this.reccmp.setShowRecomp(evt.detail);
      this.callListeners();
    });

    this.addEventListener('prevPage', () => {
      this.reccmp.setPageNumber(this.reccmp.state.pageNumber - 1);
      this.callListeners();
    });

    this.addEventListener('nextPage', () => {
      this.reccmp.setPageNumber(this.reccmp.state.pageNumber + 1);
      this.callListeners();
    });

    this.addEventListener('setPage', (evt) => {
      this.reccmp.setPageNumber(evt.detail);
      this.callListeners();
    });

    this.addEventListener('setQuery', (evt) => {
      this.reccmp.setQuery(evt.detail);
      this.callListeners();
    });

    this.addEventListener('setFilterType', (evt) => {
      this.reccmp.setFilterType(evt.detail);
      this.callListeners();
    });

    this.addEventListener('setSortCol', (evt) => {
      this.reccmp.setSortCol(evt.detail);
      this.callListeners();
    });

    this.addEventListener('setPageSize', (evt) => {
      this.reccmp.setPageSize(evt.detail);
      this.callListeners();
    });

    this.addEventListener('toggleExpanded', (evt) => {
      this.reccmp.toggleExpanded(evt.detail);
      for (const fn of this.tables) {
        fn(this.reccmp.state);
      }
    });
  }

  callListeners() {
    for (const fn of this.listeners) {
      fn(this.reccmp.state);
    }
  }
}


/******************************************************************************/
// components/clickToCopy.js
function copyToClipboard(value) {
  navigator.clipboard.writeText(value);
}

class ClickToCopy extends window.HTMLElement {
  connectedCallback() {
    this.addEventListener('mouseout', () => {
      this.removeAttribute('copied');
    });

    this.addEventListener('click', (evt) => {
      copyToClipboard(evt.target.textContent);
      this.setAttribute('copied', '');
      // Display "copied!" message for up to 2 seconds
      // if the user keeps their mouse on the link.
      setTimeout(() => {
        this.removeAttribute('copied');
      }, 2000);
    });
  }
}


/******************************************************************************/
// components/diffDisplay.js

function formatAsm(entries, _addrOption) {
  const output = [];

  const createTh = (text) => {
    const th = document.createElement('th');
    th.innerText = text;
    return th;
  };

  const createTd = (text, className = '') => {
    const td = document.createElement('td');
    td.innerText = text;
    td.className = className;
    return td;
  };

  entries.forEach((obj) => {
    // These won't all be present. You get "both" for an equal node
    // and orig/recomp for a diff.
    const { both = [], orig = [], recomp = [] } = obj;

    output.push(
      ...both.map(([addr, line, recompAddr]) => {
        const tr = document.createElement('tr');
        tr.appendChild(createTh(addr));
        tr.appendChild(createTh(recompAddr));
        tr.appendChild(createTd(line));
        return tr;
      }),
    );

    output.push(
      ...orig.map(([addr, line]) => {
        const tr = document.createElement('tr');
        tr.appendChild(createTh(addr));
        tr.appendChild(createTh(''));
        tr.appendChild(createTd(`-${line}`, 'diffneg'));
        return tr;
      }),
    );

    output.push(
      ...recomp.map(([addr, line]) => {
        const tr = document.createElement('tr');
        tr.appendChild(createTh(''));
        tr.appendChild(createTh(addr));
        tr.appendChild(createTd(`+${line}`, 'diffpos'));
        return tr;
      }),
    );
  });

  return output;
}

// Helper for this set/remove attribute block
function setBooleanAttribute(element, attribute, value) {
  if (value) {
    element.setAttribute(attribute, '');
  } else {
    element.removeAttribute(attribute);
  }
}

class DiffDisplayOptions extends window.HTMLElement {
  static observedAttributes = ['data-option'];

  connectedCallback() {
    if (this.shadowRoot !== null) {
      return;
    }

    const shadow = this.attachShadow({ mode: 'open' });
    shadow.innerHTML = `
      <style>
        fieldset {
          align-items: center;
          display: flex;
          margin-bottom: 20px;
        }

        label {
          margin-right: 10px;
          user-select: none;
        }

        label, input {
          cursor: pointer;
        }
      </style>
      <fieldset>
        <legend>Address display:</legend>
        <input type="radio" id="showNone" name="addrDisplay" value=0>
        <label for="showNone">None</label>
        <input type="radio" id="showOrig" name="addrDisplay" value=1>
        <label for="showOrig">Original</label>
        <input type="radio" id="showBoth" name="addrDisplay" value=2>
        <label for="showBoth">Both</label>
      </fieldset>`;

    shadow.querySelectorAll('input[type=radio]').forEach((radio) => {
      const checked = this.option === radio.getAttribute('value');
      setBooleanAttribute(radio, 'checked', checked);

      radio.addEventListener('change', (evt) => {
        this.option = evt.target.value;
      });
    });
  }

  set option(value) {
    this.setAttribute('data-option', parseInt(value));
  }

  get option() {
    return this.getAttribute('data-option') ?? 1;
  }

  attributeChangedCallback(name, _oldValue, _newValue) {
    if (name !== 'data-option') {
      return;
    }

    this.dispatchEvent(new Event('change'));
  }
}

class DiffDisplay extends window.HTMLElement {
  static observedAttributes = ['data-option'];

  connectedCallback() {
    if (this.querySelector('diff-display-options') !== null) {
      return;
    }

    const optControl = new DiffDisplayOptions();
    optControl.option = this.option;
    optControl.addEventListener('change', (evt) => {
      this.option = evt.target.option;
    });
    this.appendChild(optControl);

    const div = document.createElement('div');
    const obj = getDataByAddr(this.address);

    const createHeaderLine = (text, className) => {
      const div = document.createElement('div');
      div.textContent = text;
      div.className = className;
      return div;
    };

    const groups = obj.diff;
    groups.forEach(([slug, subgroups]) => {
      const secondTable = document.createElement('table');
      secondTable.classList.add('diffTable');

      const hdr = document.createElement('div');
      hdr.appendChild(createHeaderLine('---', 'diffneg'));
      hdr.appendChild(createHeaderLine('+++', 'diffpos'));
      hdr.appendChild(createHeaderLine(slug, 'diffslug'));
      div.appendChild(hdr);

      const tbody = document.createElement('tbody');
      secondTable.appendChild(tbody);

      const diffs = formatAsm(subgroups, this.option);
      for (const el of diffs) {
        tbody.appendChild(el);
      }

      div.appendChild(secondTable);
    });

    this.appendChild(div);
  }

  get address() {
    return this.getAttribute('data-address');
  }

  set address(value) {
    this.setAttribute('data-address', value);
  }

  get option() {
    return this.getAttribute('data-option') ?? 1;
  }

  set option(value) {
    this.setAttribute('data-option', value);
  }
}

/******************************************************************************/
// components/hidePerfect.js
class HidePerfect extends window.HTMLElement {
  connectedCallback() {
    this.innerHTML = `<label><input type="checkbox" />Hide 100% match</label>`;
    this.querySelector('input[type=checkbox]').addEventListener('change', (evt) => {
      this.dispatchEvent(new CustomEvent('setHidePerfect', { bubbles: true, detail: evt.target.checked }));
    });

    this.dispatchEvent(new ReccmpRegisterEvent(this.update.bind(this)));
  }

  update({ hidePerfect }) {
    this.querySelector('input[type=checkbox]').checked = hidePerfect;
  }
}


/******************************************************************************/
// components/hideStub.js
class HideStub extends window.HTMLElement {
  connectedCallback() {
    this.innerHTML = `<label><input type="checkbox" />Hide stubs</label>`;
    this.querySelector('input[type=checkbox]').addEventListener('change', (evt) => {
      this.dispatchEvent(new CustomEvent('setHideStub', { bubbles: true, detail: evt.target.checked }));
    });

    this.dispatchEvent(new ReccmpRegisterEvent(this.update.bind(this)));
  }

  update({ hideStub }) {
    this.querySelector('input[type=checkbox]').checked = hideStub;
  }
}


/******************************************************************************/
// components/listingTable.js
function countDiffs(row) {
  const { diff = '' } = row;
  if (diff === '') {
    return '';
  }

  const diffs = diff.flatMap(([_slug, subgroups]) => subgroups);
  const diffLength = diffs.filter((d) => !('both' in d)).length;
  const diffWord = diffLength === 1 ? 'diff' : 'diffs';
  return diffLength === 0 ? '' : `${diffLength} ${diffWord}`;
}

function getMatchPercentText(row) {
  if ('stub' in row) {
    return 'stub';
  }

  if ('effective' in row) {
    return '100.00%*';
  }

  return `${(row.matching * 100).toFixed(2)}%`;
}

function createDiffRow(obj, showRecomp) {
  let contents;

  // If "diff" is undefined or empty, that means
  // there are no diffs for this entity. (GH #201)
  const { diff = [] } = obj;

  if ('stub' in obj) {
    contents = document.createElement('div');
    contents.className = 'no-diff';
    contents.textContent = 'Stub. No diff.';
  } else if (diff.length === 0) {
    contents = document.createElement('div');
    contents.className = 'no-diff';
    contents.textContent = 'Identical function - no diff';
  } else {
    contents = document.createElement('diff-display');
    contents.dataset.option = '1';
    contents.dataset.address = obj.address;
  }

  const td = document.createElement('td');
  td.setAttribute('colspan', showRecomp ? 5 : 4);
  td.append(contents);

  const tr = document.createElement('tr');
  tr.dataset.diff = obj.address;
  tr.append(td);
  return tr;
}

function createFuncRow(obj, showRecomp) {
  const createColumn = (dataCol, canCopy, textContent) => {
    const td = document.createElement('td');
    td.dataset.col = dataCol;
    if (canCopy) {
      const copy = document.createElement('click-to-copy');
      copy.textContent = textContent;
      td.append(copy);
    } else {
      td.append(textContent);
    }

    return td;
  };

  const cols = {
    address: createColumn('address', true, obj.address),
    recomp: createColumn('recomp', true, obj.recomp),
    name: createColumn('name', false, obj.name),
    diffs: createColumn('diffs', false, countDiffs(obj)),
    matching: createColumn('matching', false, getMatchPercentText(obj)),
  };

  if (!showRecomp) {
    delete cols.recomp;
  }

  const tr = document.createElement('tr');
  tr.dataset.address = obj.address;
  tr.append(...Object.values(cols));
  return tr;
}

function createHeaderRow(showRecomp, sortCol, sortDesc) {
  const cols = {
    address: 'Address',
    recomp: 'Recomp',
    name: 'Name',
    diffs: '',
    matching: 'Matching',
  };

  if (!showRecomp) {
    delete cols.recomp;
  }

  const headers = Object.entries(cols).map(([key, name]) => {
    if (key === 'diffs') {
      const th = document.createElement('th');
      th.dataset.col = 'diffs';
      th.dataset.noSort = true;
      return th;
    }

    const sort_indicator = document.createElement('div');
    if (key === sortCol) {
      sort_indicator.innerHTML = sortDesc ? '&#9660' : '&#9650';
    }

    const th = document.createElement('th');
    th.dataset.col = key;
    const div = document.createElement('div');
    const span = document.createElement('span');
    span.textContent = name;
    div.append(span, sort_indicator);
    th.append(div);
    return th;
  });

  const tr = document.createElement('tr');
  tr.append(...headers);
  return tr;
}

class ListingTable extends window.HTMLElement {
  connectedCallback() {
    this.innerHTML = '<table id="listing"><thead></thead><tbody></tbody></table>';

    this.dispatchEvent(new ReccmpRegisterEvent(this.update.bind(this)));
    this.dispatchEvent(new CustomEvent('reccmp-table', { bubbles: true, detail: this.setDiffRow.bind(this) }));
  }

  update({ currentPage, expanded, showRecomp, sortCol, sortDesc }) {
    const header_row = createHeaderRow(showRecomp, sortCol, sortDesc);

    const rows = [];

    // Create rows for this page.
    for (const obj of currentPage) {
      rows.push(createFuncRow(obj, showRecomp));
      if (obj.address in expanded) {
        rows.push(createDiffRow(obj, showRecomp));
      }
    }

    this.querySelector('thead').replaceChildren(header_row);
    this.querySelector('tbody').replaceChildren(...rows);

    this.querySelectorAll('th:not([data-no-sort])').forEach((th) => {
      const col = th.dataset.col;
      if (col) {
        const span = th.querySelector('span');
        if (span) {
          span.addEventListener('click', () => {
            this.dispatchEvent(new CustomEvent('setSortCol', { bubbles: true, detail: col }));
          });
        }
      }
    });

    this.querySelectorAll('tr[data-address]').forEach((row) => {
      // Clicking the name column toggles the diff detail row.
      // This is added or removed without replacing the entire <tbody>.
      row.querySelector('td[data-col="name"]').addEventListener('click', () => {
        this.dispatchEvent(new CustomEvent('toggleExpanded', { bubbles: true, detail: row.dataset.address }));
      });
    });
  }

  setDiffRow({ currentPage, expanded, showRecomp }) {
    const tbody = this.querySelector('tbody');

    for (const obj of currentPage) {
      const address = obj.address;
      const funcrow = tbody.querySelector(`tr[data-address="${address}"]`);
      if (funcrow === null) {
        continue;
      }

      const existing = tbody.querySelector(`tr[data-diff="${address}"]`);
      const isExpanded = existing !== null;
      const shouldExpand = address in expanded;

      if (!isExpanded && shouldExpand) {
        // Insert the diff row after the parent func row.
        funcrow.insertAdjacentElement('afterend', createDiffRow(obj, showRecomp));
      } else if (isExpanded && !shouldExpand) {
        tbody.removeChild(existing);
      }
    }
  }
}


/******************************************************************************/
// components/nextPageButton.js
class NextPageButton extends window.HTMLElement {
  connectedCallback() {
    this.innerHTML = `<button>next</button>`;
    this.querySelector('button').addEventListener('click', () => {
      this.dispatchEvent(new CustomEvent('nextPage', { bubbles: true }));
    });

    this.dispatchEvent(new ReccmpRegisterEvent(this.update.bind(this)));
  }

  update({ pageNumber, maxPageNumber }) {
    const button = this.querySelector('button');
    if (pageNumber === maxPageNumber) {
      button.setAttribute('disabled', '');
    } else {
      button.removeAttribute('disabled');
    }
  }
}


/******************************************************************************/
// components/pageNumberOf.js
class PageNumberOf extends window.HTMLElement {
  connectedCallback() {
    this.dispatchEvent(new ReccmpRegisterEvent(this.update.bind(this)));
  }

  update({ pageNumber, maxPageNumber }) {
    this.textContent = `Page ${pageNumber + 1} of ${maxPageNumber + 1}`;
  }
}


/******************************************************************************/
// components/pageSelect.js
function getCppClass(str) {
  const idx = str.indexOf('::');
  if (idx !== -1) {
    return str.slice(0, idx);
  }

  return str;
}

// Clamp string length to specified length and pad with ellipsis
function stringTruncate(str, maxlen = 20) {
  str = getCppClass(str);
  if (str.length > maxlen) {
    return `${str.slice(0, maxlen)}...`;
  }

  return str;
}

function pageHeadings(pages, sortCol) {
  return pages.map((page, index) => {
    const first = page[0];
    const last = page[page.length - 1];

    let start = first[sortCol];
    let end = last[sortCol];

    if (sortCol === 'matching') {
      start = getMatchPercentText(first);
      end = getMatchPercentText(last);
    }

    return [index, stringTruncate(start), stringTruncate(end)];
  });
}

class PageSelect extends window.HTMLElement {
  connectedCallback() {
    this.innerHTML = `<select></select>`;

    this.querySelector('select').addEventListener('change', (evt) => {
      this.dispatchEvent(new CustomEvent('setPage', { bubbles: true, detail: evt.target.value }));
    });

    this.dispatchEvent(new ReccmpRegisterEvent(this.update.bind(this)));
  }

  update({ pages, pageNumber, results, sortCol }) {
    const select = this.querySelector('select');

    if (results.length === 0) {
      select.setAttribute('disabled', '');
      const option = document.createElement('option');
      option.textContent = '- no results -';
      select.replaceChildren(option);
      return;
    }

    select.removeAttribute('disabled');

    const options = [];
    for (const [value, fromText, toText] of pageHeadings(pages, sortCol)) {
      const option = document.createElement('option');
      option.value = value;
      if (pageNumber === value) {
        option.setAttribute('selected', '');
      }
      option.textContent = `${sortCol}: ${fromText} to ${toText}`;
      options.push(option);
    }

    select.replaceChildren(...options);
  }
}


/******************************************************************************/
// components/prevPageButton.js
class PrevPageButton extends window.HTMLElement {
  connectedCallback() {
    this.innerHTML = `<button>prev</button>`;
    this.querySelector('button').addEventListener('click', () => {
      this.dispatchEvent(new CustomEvent('prevPage', { bubbles: true }));
    });

    this.dispatchEvent(new ReccmpRegisterEvent(this.update.bind(this)));
  }

  update({ pageNumber }) {
    const button = this.querySelector('button');
    if (pageNumber === 0) {
      button.setAttribute('disabled', '');
    } else {
      button.removeAttribute('disabled');
    }
  }
}


/******************************************************************************/
// components/resultCount.js
class ResultCount extends window.HTMLElement {
  connectedCallback() {
    this.dispatchEvent(new ReccmpRegisterEvent(this.update.bind(this)));
  }

  update({ results }) {
    this.textContent = results.length;
  }
}


/******************************************************************************/
// components/showRecomp.js
class ShowRecomp extends window.HTMLElement {
  connectedCallback() {
    this.innerHTML = `<label><input type="checkbox" />Show recomp address</label>`;
    this.querySelector('input[type=checkbox]').addEventListener('change', (evt) => {
      this.dispatchEvent(new CustomEvent('setShowRecomp', { bubbles: true, detail: evt.target.checked }));
    });

    this.dispatchEvent(new ReccmpRegisterEvent(this.update.bind(this)));
  }

  update({ showRecomp }) {
    this.querySelector('input[type=checkbox]').checked = showRecomp;
  }
}


/******************************************************************************/
// components/searchbar.js
class SearchBar extends window.HTMLElement {
  connectedCallback() {
    this.innerHTML = `<input type="search"></input>`;
    this.querySelector('input[type=search]').addEventListener('input', (evt) => {
      this.dispatchEvent(new CustomEvent('setQuery', { bubbles: true, detail: evt.target.value }));
    });

    this.dispatchEvent(new ReccmpRegisterEvent(this.update.bind(this)));
  }

  update({ query, filterType }) {
    const input = this.querySelector('input[type=search]');
    input.value = query;
    input.placeholder = filterType === 1 ? 'Search for offset or function name...' : 'Search for instruction...';
  }
}

/******************************************************************************/
// components/searchOptions.js
class SearchOptions extends window.HTMLElement {
  connectedCallback() {
    this.innerHTML = `
<label><input type="radio" name="filterType" value=1 />Name/address</label>
<label><input type="radio" name="filterType" value=2 />Asm output</label>
<label><input type="radio" name="filterType" value=3 />Asm diffs only</label>`;

    this.querySelectorAll('input[name=filterType]').forEach((radio) => {
      radio.addEventListener('change', () => {
        this.dispatchEvent(new CustomEvent('setFilterType', { bubbles: true, detail: radio.getAttribute('value') }));
      });
    });

    this.dispatchEvent(new ReccmpRegisterEvent(this.update.bind(this)));
  }

  update({ filterType }) {
    this.querySelectorAll('input[name=filterType]').forEach((radio) => {
      const checked = filterType === parseInt(radio.getAttribute('value'));
      radio.checked = checked;
    });
  }
}


/******************************************************************************/
// main.js
window.onload = () => {
  window.customElements.define('reccmp-provider', ReccmpProvider);
  window.customElements.define('click-to-copy', ClickToCopy); // used by listing-table
  window.customElements.define('listing-table', ListingTable);
  window.customElements.define('diff-display', DiffDisplay);
  window.customElements.define('diff-display-options', DiffDisplayOptions);
  window.customElements.define('search-bar', SearchBar);
  window.customElements.define('hide-perfect', HidePerfect);
  window.customElements.define('hide-stub', HideStub);
  window.customElements.define('next-page-button', NextPageButton);
  window.customElements.define('prev-page-button', PrevPageButton);
  window.customElements.define('result-count', ResultCount);
  window.customElements.define('search-options', SearchOptions);
  window.customElements.define('show-recomp', ShowRecomp);
  window.customElements.define('page-number-of', PageNumberOf);
  window.customElements.define('page-select', PageSelect);
};

</script>
  </head>
  <body>
    <div class="main">
      <h1>Decompilation Status</h1>
      <reccmp-provider>
        <search-bar></search-bar>
        <div class="filters">
          <fieldset>
            <legend>Options:</legend>
            <hide-perfect></hide-perfect>
            <hide-stub></hide-stub>
            <show-recomp></show-recomp>
          </fieldset>
          <fieldset>
            <legend>Search filters on:</legend>
            <search-options></search-options>
          </fieldset>
        </div>
        <div class="filters">
          <p class="rowcount">Results: <result-count></result-count></p>
          <fieldset id="pageDisplay">
            <legend><page-number-of></page-number-of></legend>
            <prev-page-button></prev-page-button>
            <page-select></page-select>
            <next-page-button></next-page-button>
          </fieldset>
        </div>
        <listing-table>
        </listing-table>
      </reccmp-provider>
    </div>
  </body>
</html>
